<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>/Volumes/Users/johnh/Documents/ObjCpp/objcpp.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/Volumes/Users/johnh/Documents/ObjCpp/objcpp.h</h1><a href="objcpp_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *  objcpp.h - reference counting wrappers for Objective-C containers.</span>
<a name="l00003"></a>00003 <span class="comment"> *  ========</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Created by John Holdsworth on 01/04/2009.</span>
<a name="l00006"></a>00006 <span class="comment"> *  Copyright 2009 John Holdsworth.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *  $Id: //depot/ObjCpp/objcpp.h#79 $</span>
<a name="l00009"></a>00009 <span class="comment"> *  $DateTime: 2009/11/14 19:56:55 $</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> *  C++ classes to wrap up XCode classes for operator overload of</span>
<a name="l00012"></a>00012 <span class="comment"> *  useful operations such as access to NSArrays and NSDictionary</span>
<a name="l00013"></a>00013 <span class="comment"> *  by subscript or NSString operators such as + for concatenation.</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> *  This works as the Apple Objective-C compiler supports source</span>
<a name="l00016"></a>00016 <span class="comment"> *  which mixes C++ with objective C. To enable this: for each</span>
<a name="l00017"></a>00017 <span class="comment"> *  source file which will include/import this header file, select</span>
<a name="l00018"></a>00018 <span class="comment"> *  it in Xcode and open it's "Info". To enable mixed compilation,</span>
<a name="l00019"></a>00019 <span class="comment"> *  for the file's "File Type" select: "sourcecode.cpp.objcpp".</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *  For bugs or ommisions please email objcpp@johnholdsworth.com</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> *  Home page for updates and docs: http://objcpp.johnholdsworth.com</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> *  Forum for support: http://n2.nabble.com/Objcpp-Q-A-f2626793.html </span>
<a name="l00026"></a>00026 <span class="comment"> *</span>
<a name="l00027"></a>00027 <span class="comment"> *  You may make commercial use of this source in applications without</span>
<a name="l00028"></a>00028 <span class="comment"> *  charge but not sell it as source nor can you remove this notice from</span>
<a name="l00029"></a>00029 <span class="comment"> *  this source if you redistribute. You can make any changes you like</span>
<a name="l00030"></a>00030 <span class="comment"> *  to this code before redistribution but please annotate them below.</span>
<a name="l00031"></a>00031 <span class="comment"> *</span>
<a name="l00032"></a>00032 <span class="comment"> *  If you find it useful please send a donation via paypal to account</span>
<a name="l00033"></a>00033 <span class="comment"> *  objcpp@johnholdsworth.com. Thanks.</span>
<a name="l00034"></a>00034 <span class="comment"> *</span>
<a name="l00035"></a>00035 <span class="comment"> *  THIS CODE IS PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND EITHER</span>
<a name="l00036"></a>00036 <span class="comment"> *  EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED </span>
<a name="l00037"></a>00037 <span class="comment"> *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
<a name="l00038"></a>00038 <span class="comment"> *</span>
<a name="l00039"></a>00039 <span class="comment"> *  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING</span>
<a name="l00040"></a>00040 <span class="comment"> *  WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS</span>
<a name="l00041"></a>00041 <span class="comment"> *  THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING</span>
<a name="l00042"></a>00042 <span class="comment"> *  ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT</span>
<a name="l00043"></a>00043 <span class="comment"> *  OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED</span>
<a name="l00044"></a>00044 <span class="comment"> *  TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED </span>
<a name="l00045"></a>00045 <span class="comment"> *  BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH </span>
<a name="l00046"></a>00046 <span class="comment"> *  ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN</span>
<a name="l00047"></a>00047 <span class="comment"> *  ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</span>
<a name="l00048"></a>00048 <span class="comment"> *</span>
<a name="l00049"></a>00049 <span class="comment"> */</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;Foundation/Foundation.h&gt;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">/************************************************************************</span>
<a name="l00054"></a>00054 <span class="comment">  Add the following to your project's "Other Sources/Project_Prefix.pch"</span>
<a name="l00055"></a>00055 <span class="comment"> ************************************************************************</span>
<a name="l00056"></a>00056 <span class="comment"> </span>
<a name="l00057"></a>00057 <span class="comment"> // precompile objcpp //</span>
<a name="l00058"></a>00058 <span class="comment"> #ifdef __cplusplus</span>
<a name="l00059"></a>00059 <span class="comment">    #import "objcpp.h"</span>
<a name="l00060"></a>00060 <span class="comment">    #import "objsql.h"</span>
<a name="l00061"></a>00061 <span class="comment"> #endif</span>
<a name="l00062"></a>00062 <span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment"> */</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">/*===========================================================================*/</span>
<a name="l00066"></a>00066 <span class="comment">/*============================== Overrides ==================================*/</span>
<a name="l00067"></a>00067 <span class="comment"></span>
<a name="l00068"></a>00068 <span class="comment">/**</span>
<a name="l00069"></a>00069 <span class="comment"> For detailed debugging</span>
<a name="l00070"></a>00070 <span class="comment"> */</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="preprocessor">#ifndef OOTrace</span>
<a name="l00073"></a><a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define OOTrace if ( _objcpp.trace ) NSLog </span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00076"></a>00076 <span class="comment">/**</span>
<a name="l00077"></a>00077 <span class="comment"> Function to log warning messages</span>
<a name="l00078"></a>00078 <span class="comment"> */</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#ifndef OOWarn</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#ifdef OODEBUG</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="preprocessor">#define OOWarn OODump</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00084"></a><a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define OOWarn NSLog</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00088"></a>00088 <span class="comment">/**</span>
<a name="l00089"></a>00089 <span class="comment"> Inital value for uninitialised references. Use (id)kCFNull to detect messaging of unititialsed objects.</span>
<a name="l00090"></a>00090 <span class="comment"> */</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="preprocessor">#ifndef OOEmpty</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#ifdef OOSTRICT</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span><span class="preprocessor">#define OOEmpty (id)kCFNull</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00096"></a><a class="code" href="objcpp_8h.html#2158c9a17dd936d78df21a5594746679">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define OOEmpty nil</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00100"></a>00100 <span class="comment">/**</span>
<a name="l00101"></a>00101 <span class="comment"> Value to use in place of nil in NSArray and NSDictioanry. Set to nil to trap attempts to assign nil.</span>
<a name="l00102"></a>00102 <span class="comment"> */</span>
<a name="l00103"></a>00103  
<a name="l00104"></a>00104 <span class="preprocessor">#ifndef OONoValue</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span><span class="preprocessor">#ifdef OODEBUG_NOVALUE</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span><span class="preprocessor">#define OONoValue nil</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00108"></a><a class="code" href="objcpp_8h.html#c810750a94cd8de2a67df3c8a20add70">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define OONoValue (id)kCFNull</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a>00112 <span class="preprocessor">#ifdef OODEBUG</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span><span class="preprocessor">#define oo_inline </span><span class="comment">/*  */</span>
<a name="l00114"></a>00114 <span class="preprocessor">#else</span>
<a name="l00115"></a><a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define oo_inline inline</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00118"></a>00118 <span class="comment">/**</span>
<a name="l00119"></a>00119 <span class="comment"> Policy: Determines whether asignment from immutables automatically takes "mutableCopy".</span>
<a name="l00120"></a>00120 <span class="comment"> */</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="preprocessor">#ifndef OOCopyImmutable</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span><span class="preprocessor">#define OOCopyImmutable copy // could also be "set" or left undefined (see below)</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00126"></a>00126 <span class="comment">/**</span>
<a name="l00127"></a>00127 <span class="comment"> If you ask me this is how "nil" should be defined</span>
<a name="l00128"></a>00128 <span class="comment"> */</span>
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="objcpp_8h.html#4d0260f394deb149ed1af14186fbc078">00130</a> <span class="preprocessor">#define OONil (id)nil</span>
<a name="l00131"></a><a class="code" href="objcpp_8h.html#ab53c44a330e73cd8cc02900d335f65f">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define OONull (id)kCFNull</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span>
<a name="l00133"></a>00133 <span class="comment">// containers for OOStrings</span>
<a name="l00134"></a><a class="code" href="objcpp_8h.html#a71d43d536418b90e3a25dec625c8c24">00134</a> <span class="preprocessor">#define OOStringArray OOArray&lt;OOString&gt;</span>
<a name="l00135"></a><a class="code" href="objcpp_8h.html#f6361c2e06279350cf9ed75929c5889c">00135</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStringDictionary OODictionary&lt;OOString&gt;</span>
<a name="l00136"></a><a class="code" href="objcpp_8h.html#8c59b153fb0f5775720a64575123ff1d">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStringDictionaryArray OOArray&lt;OOStringDictionary &gt;</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>
<a name="l00138"></a><a class="code" href="objcpp_8h.html#78806c7429c8e62d63f96941e9da2550">00138</a> <span class="preprocessor">#define OOStrArray OOStringArray</span>
<a name="l00139"></a><a class="code" href="objcpp_8h.html#3e2dfdf792aef6680eaf8abcf6f535b5">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStringDict OOStringDictionary</span>
<a name="l00140"></a><a class="code" href="objcpp_8h.html#0c5312f62df407aa47865dcafce13bb1">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStrDict OOStringDictionary</span>
<a name="l00141"></a><a class="code" href="objcpp_8h.html#99e18b3bf874cb891a49ea1a6142be31">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStrDicts OOStringDictionaryArray</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>
<a name="l00143"></a>00143 <span class="comment">// containers for OONumbers</span>
<a name="l00144"></a><a class="code" href="objcpp_8h.html#376677a77df6a9f76ffdadd7a927ca06">00144</a> <span class="preprocessor">#define OONumberArray OOArray&lt;OONumber&gt;</span>
<a name="l00145"></a><a class="code" href="objcpp_8h.html#070899613ea2fb0e5201d085e4e818a9">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define OONumberDict OODictionary&lt;OONumber&gt;</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span>
<a name="l00147"></a>00147 <span class="comment">// for slicing arrays</span>
<a name="l00148"></a><a class="code" href="objcpp_8h.html#7bfd4cfa8f4f2d0250f2d2b5bff4c317">00148</a> <span class="keyword">inline</span> NSRange <a class="code" href="objcpp_8h.html#7bfd4cfa8f4f2d0250f2d2b5bff4c317">OORange</a>( <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> end  ) {
<a name="l00149"></a>00149     <span class="keywordflow">return</span> NSMakeRange( start, end-start );
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 <span class="preprocessor">#define OOSlice OOArray&lt;id&gt;</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00153"></a>00153 <span class="comment">// variations as per taste</span>
<a name="l00154"></a><a class="code" href="objcpp_8h.html#8e1b42476f0b1005bdc42a118850814b">00154</a> <span class="preprocessor">#define OORef OOReference</span>
<a name="l00155"></a><a class="code" href="objcpp_8h.html#c803fb010d71bbba1ffbeffe1b390540">00155</a> <span class="preprocessor"></span><span class="preprocessor">#define OOPtr OOPointer</span>
<a name="l00156"></a><a class="code" href="objcpp_8h.html#43def952e4ea0537bc083208f9a68237">00156</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStr OOString</span>
<a name="l00157"></a><a class="code" href="objcpp_8h.html#71ff28d4d632c86ef149eff53bfa66cd">00157</a> <span class="preprocessor"></span><span class="preprocessor">#define OOStrs OOStringArray</span>
<a name="l00158"></a><a class="code" href="objcpp_8h.html#d896c998e9491af6a27c89afb7f63b3e">00158</a> <span class="preprocessor"></span><span class="preprocessor">#define OOData OORef&lt;NSData *&gt;</span>
<a name="l00159"></a><a class="code" href="objcpp_8h.html#ac11788afa6c2f5b8b98264929b8c794">00159</a> <span class="preprocessor"></span><span class="preprocessor">#define OODate OORef&lt;NSDate *&gt;</span>
<a name="l00160"></a><a class="code" href="objcpp_8h.html#821c3b9615a5d8b2548f86689c0f4286">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define OODict OODictionary</span>
<a name="l00161"></a><a class="code" href="objcpp_8h.html#769a996c91bdd4783d7799373876bc74">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define OOHash OODictionary</span>
<a name="l00162"></a><a class="code" href="objcpp_8h.html#152c6b5965268c24e14642170144ea3c">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define OOList OOArray</span>
<a name="l00163"></a><a class="code" href="objcpp_8h.html#f0eb2c182418149e448dbb2c01818673">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define OOFmt OOFormat</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>
<a name="l00165"></a>00165 <span class="comment">// for debugging</span>
<a name="l00166"></a><a class="code" href="objcpp_8h.html#cb5efe9c92bc0cf8dd17251f682f3d45">00166</a> <span class="keyword">static</span> <span class="keyword">struct </span>{ BOOL <a class="code" href="objcpp_8h.html#cb5efe9c92bc0cf8dd17251f682f3d45">trace</a>; <span class="keywordtype">int</span> <a class="code" href="objcpp_8h.html#6a4904c112507a43e7dc8495b62cc0fc">retained</a>; } _objcpp = {NO, 0};
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">// stack traces for debug warnings</span>
<a name="l00169"></a>00169 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="keyword">static</span> <span class="keywordtype">void</span> OODump( NSString *format, ... ) {
<a name="l00172"></a>00172     va_list argp; va_start(argp, format);
<a name="l00173"></a>00173     NSLogv( format, argp );
<a name="l00174"></a>00174     va_end( argp );
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="keywordflow">@try</span> {
<a name="l00177"></a>00177         <span class="keyword">@throw</span> [NSException alloc];
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179     <span class="keywordflow">@catch</span> ( NSException *ex ) {
<a name="l00180"></a>00180         NSMutableString *buffer = [NSMutableString string];
<a name="l00181"></a>00181         [buffer appendFormat:<span class="stringliteral">@"atos -p %d -printHeader"</span>, getpid()];
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="keywordflow">for</span>( NSNumber *n in [ex callStackReturnAddresses] )
<a name="l00184"></a>00184             [buffer appendFormat:<span class="stringliteral">@" %u"</span>, [n intValue]];
<a name="l00185"></a>00185 
<a name="l00186"></a>00186         NSLog( <span class="stringliteral">@"executing:\n\n%@\n\n"</span>, buffer );
<a name="l00187"></a>00187         system( [buffer UTF8String] );
<a name="l00188"></a>00188         [ex release];
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="preprocessor">#ifdef OODEBUG</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span><span class="preprocessor">#define OOPrint( _obj ) NSLog( </span><span class="stringliteral">@"%s:%d - %s = %@"</span>, __FILE__, __LINE__, #_obj, *_obj )
<a name="l00194"></a>00194 <span class="preprocessor">#else</span>
<a name="l00195"></a><a class="code" href="objcpp_8h.html#5726e097d5f72382cca9368fb2980c16">00195</a> <span class="preprocessor"></span><span class="preprocessor">#define OOPrint( _obj ) </span><span class="comment">/**/</span>
<a name="l00196"></a>00196 <span class="preprocessor">#endif</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 <span class="comment">// forward referenced class templates</span>
<a name="l00199"></a>00199 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt; <span class="keyword">class </span><a class="code" href="class_o_o_dictionary.html">OODictionary</a>;
<a name="l00200"></a>00200 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt; <span class="keyword">class </span>OOArraySub;
<a name="l00201"></a>00201 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt; <span class="keyword">class </span>OODictionarySub;
<a name="l00202"></a>00202 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt; <span class="keyword">class </span>OOArraySlice;
<a name="l00203"></a>00203 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt; <span class="keyword">class </span>OODictionarySlice;
<a name="l00204"></a>00204 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE,<span class="keyword">typename</span> RTYPE,<span class="keyword">typename</span> STYPE&gt;
<a name="l00205"></a>00205 <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>;
<a name="l00206"></a>00206 <span class="keyword">class </span><a class="code" href="class_o_o_string.html">OOString</a>;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/*=================================================================================*/</span>
<a name="l00209"></a>00209 <span class="comment">/*============================== Basic ref managment ========================*/</span>
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">/**</span>
<a name="l00212"></a>00212 <span class="comment"> A class managing basic ref counting references retain/release mechansim for use in</span>
<a name="l00213"></a>00213 <span class="comment"> instance variables which will not allow constructors or destructors. Use the &amp;operator</span>
<a name="l00214"></a>00214 <span class="comment"> to get a pointer with "autorelease" scope for use in the rest of your program.</span>
<a name="l00215"></a>00215 <span class="comment"> </span>
<a name="l00216"></a>00216 <span class="comment"> To free the ref either assign nil references the "=" operator or call use the ~ operator</span>
<a name="l00217"></a>00217 <span class="comment"> which returns a transient ref. Use &amp;~var to free the ref with autorelrease scope.</span>
<a name="l00218"></a>00218 <span class="comment"> </span>
<a name="l00219"></a>00219 <span class="comment"> Usage:</span>
<a name="l00220"></a>00220 <span class="comment"> &lt;pre&gt;</span>
<a name="l00221"></a>00221 <span class="comment"> OOReference&lt;NSString *&gt; immutableRef = @"STRING"; // take referrence to a string</span>
<a name="l00222"></a>00222 <span class="comment"> OOReference&lt;NSMutableArray *&gt; mutableRef &lt;&lt;= [NSArray array]; // take mutable copy</span>
<a name="l00223"></a>00223 <span class="comment"> NSMutableArray *ptr = &amp;amp;mutableRef; // get autoreleasing pointer to original object</span>
<a name="l00224"></a>00224 <span class="comment"> NSMutableArray *ptr = *mutableRef; // get pointer to original object</span>
<a name="l00225"></a>00225 <span class="comment"> ~mutableRef; // clear out pointer and remove "release" object.</span>
<a name="l00226"></a>00226 <span class="comment"> </span>
<a name="l00227"></a>00227 <span class="comment"> - (NSString *)function:(NSString *)str {</span>
<a name="l00228"></a>00228 <span class="comment"> OOReference&lt;NSString *&gt; ref = str; // take ref</span>
<a name="l00229"></a>00229 <span class="comment"> </span>
<a name="l00230"></a>00230 <span class="comment"> // do something</span>
<a name="l00231"></a>00231 <span class="comment"> </span>
<a name="l00232"></a>00232 <span class="comment"> return &amp;amp;str; // get autoreleasing pointer to return</span>
<a name="l00233"></a>00233 <span class="comment"> // ref is discarded when object detructed on function exit.</span>
<a name="l00234"></a>00234 <span class="comment"> } </span>
<a name="l00235"></a>00235 <span class="comment"> &lt;/pre&gt;</span>
<a name="l00236"></a>00236 <span class="comment"> */</span>
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> RTYPE&gt;
<a name="l00239"></a><a class="code" href="class_o_o_reference.html">00239</a> <span class="keyword">class </span><a class="code" href="class_o_o_reference.html">OOReference</a> {
<a name="l00240"></a><a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">00240</a>     RTYPE <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>;
<a name="l00241"></a><a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">00241</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> Class <a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">classOfReference</a>()<span class="keyword"> const </span>{
<a name="l00242"></a>00242         <span class="keywordflow">return</span> [typeof *<span class="keyword">ref class</span>];
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244     <span class="comment">// initialise ref</span>
<a name="l00245"></a><a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">00245</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( RTYPE val = <a class="code" href="objcpp_8h.html#2158c9a17dd936d78df21a5594746679">OOEmpty</a> ) {
<a name="l00246"></a>00246         <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s: %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"INIT"</span>, val != (<span class="keywordtype">id</span>)kCFNull ? (<span class="keywordtype">id</span>)val : <span class="stringliteral">@"(NULL)"</span> );
<a name="l00247"></a>00247         <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> = nil;
<a name="l00248"></a>00248         <span class="keywordflow">return</span> <span class="keyword">set</span>( val );
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 <span class="keyword">protected</span>:
<a name="l00251"></a>00251     <span class="comment">// clear out referrence</span>
<a name="l00252"></a><a class="code" href="class_o_o_reference.html#ffd3fa4d7826b4a8cecb3424b84f3fef">00252</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">void</span> <a class="code" href="class_o_o_reference.html#ffd3fa4d7826b4a8cecb3424b84f3fef">detruct</a>() {
<a name="l00253"></a>00253         <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s: 0x%08x = %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"DESTUCT"</span>, <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>, <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> );
<a name="l00254"></a>00254         <span class="keyword">set</span>( (RTYPE)nil );
<a name="l00255"></a>00255     }
<a name="l00256"></a>00256     <span class="comment">// replace referrence</span>
<a name="l00257"></a><a class="code" href="class_o_o_reference.html#8f536d8762720aaea9129e65444e8462">00257</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <span class="keyword">set</span>( RTYPE val ) {
<a name="l00258"></a>00258         <span class="keywordflow">if</span> ( val &amp;&amp; val != (<span class="keywordtype">id</span>)kCFNull ) {
<a name="l00259"></a>00259             [val retain];
<a name="l00260"></a>00260             <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s#%d: 0x%08x = %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"RETAIN"</span>, [val retainCount], val, val );
<a name="l00261"></a>00261             _objcpp.retained++;
<a name="l00262"></a>00262         }
<a name="l00263"></a>00263         <span class="keywordflow">if</span> ( <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> &amp;&amp; <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> != (<span class="keywordtype">id</span>)kCFNull ) {
<a name="l00264"></a>00264             <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s#%d: 0x%08x = %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"RELEASE"</span>, [<a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> retainCount], <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>, <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> );
<a name="l00265"></a>00265             [<a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> release];
<a name="l00266"></a>00266             _objcpp.retained--;
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268         <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> = val;
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270     <span class="comment">//</span>
<a name="l00271"></a><a class="code" href="class_o_o_reference.html#aac8a769a583a33e486e6e1a38191a64">00271</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <span class="keyword">set</span>( <span class="keywordtype">int</span> nilOrCapacity ) {
<a name="l00272"></a>00272         <span class="keywordflow">if</span> ( nilOrCapacity != 0 )
<a name="l00273"></a>00273             [<span class="keyword">set</span>( [[<a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">classOfReference</a>() <a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>] initWithCapacity:nilOrCapacity] ) release];
<a name="l00274"></a>00274         <span class="keywordflow">else</span>
<a name="l00275"></a>00275             <span class="keyword">set</span>( (id)nil );
<a name="l00276"></a>00276         <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>;
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278     <span class="comment">// copy any immutable objects</span>
<a name="l00279"></a><a class="code" href="class_o_o_reference.html#d715f9b65096c4e682254f9af15a77fa">00279</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">void</span> <a class="code" href="class_o_o_reference.html#d715f9b65096c4e682254f9af15a77fa">copy</a>( RTYPE val ) {
<a name="l00280"></a>00280         RTYPE obj = [val mutableCopyWithZone:NULL];
<a name="l00281"></a>00281         <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s: 0x%08x -&gt; 0x%08x = %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"COPY"</span>, val, obj, obj );
<a name="l00282"></a>00282         [<span class="keyword">set</span>( obj ) release];
<a name="l00283"></a>00283     }
<a name="l00284"></a><a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">00284</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>()<span class="keyword"> const </span>{
<a name="l00285"></a>00285         <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> ? <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> : [[[<a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">classOfReference</a>() <a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>] <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>] autorelease];
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287     <span class="comment">// get ref with "autorelease" scope</span>
<a name="l00288"></a><a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">00288</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">autoget</a>()<span class="keyword"> const </span>{
<a name="l00289"></a>00289         <span class="keywordflow">return</span> [[<span class="keyword">get</span>() retain] autorelease];
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 <span class="keyword">public</span>:
<a name="l00292"></a>00292     <span class="comment">// constructors to avoid shallow copy</span>
<a name="l00293"></a><a class="code" href="class_o_o_reference.html#5e2a72f33347d36986e88cf2c85a6982">00293</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#5e2a72f33347d36986e88cf2c85a6982">OOReference</a>() { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>(); };<span class="comment"></span>
<a name="l00294"></a>00294 <span class="comment">    ///oo_inline OOReference( id obj ) { init( obj ); }</span>
<a name="l00295"></a><a class="code" href="class_o_o_reference.html#050bf97c231a16e3a883900f7bf1d7dd">00295</a> <span class="comment"></span>    <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#050bf97c231a16e3a883900f7bf1d7dd" title="oo_inline OOReference( id obj ) { init( obj ); }">OOReference</a>( RTYPE obj ) { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( obj ); }
<a name="l00296"></a><a class="code" href="class_o_o_reference.html#a36c409ede30401d4142460f92d069bc">00296</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#a36c409ede30401d4142460f92d069bc">OOReference</a>( CFNullRef obj ) { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( (<span class="keywordtype">id</span>)obj ); }
<a name="l00297"></a><a class="code" href="class_o_o_reference.html#e48e872432d7df6018007b186e23fcfb">00297</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#e48e872432d7df6018007b186e23fcfb">OOReference</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;val ) { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( val.<a class="code" href="class_o_o_reference.html#08ee48aeaa029f4efb4c80a1fb43c732">get</a>() ); }
<a name="l00298"></a><a class="code" href="class_o_o_reference.html#e6dd928c4aa333055d8e9765af4d8c4f">00298</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#e6dd928c4aa333055d8e9765af4d8c4f">OOReference</a>( <span class="keyword">const</span> OOArraySub&lt;RTYPE&gt; &amp;obj ) { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( obj.get() ); }
<a name="l00299"></a><a class="code" href="class_o_o_reference.html#da0955ad40d3d880aed44dc4d5b14d5c">00299</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#da0955ad40d3d880aed44dc4d5b14d5c">OOReference</a>( <span class="keyword">const</span> OODictionarySub&lt;RTYPE&gt; &amp;obj ) { <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>( obj.get() ); }
<a name="l00300"></a><a class="code" href="class_o_o_reference.html#75d94757b2ecbd878ae65c4e0ddf6117">00300</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#75d94757b2ecbd878ae65c4e0ddf6117">~OOReference</a>() { <a class="code" href="class_o_o_reference.html#ffd3fa4d7826b4a8cecb3424b84f3fef">detruct</a>(); }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     <span class="comment">// allocate new ref from RTYPE specified</span>
<a name="l00303"></a><a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">00303</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() {
<a name="l00304"></a>00304         <span class="keywordflow">if</span> ( !*<span class="keyword">this</span> ) {
<a name="l00305"></a>00305             RTYPE obj = [[<a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">classOfReference</a>() <a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>] <a class="code" href="class_o_o_reference.html#bc5c6332da8bfb95410f9fd34c724ac0">init</a>];
<a name="l00306"></a>00306             <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"ALLOC"</span>, obj );
<a name="l00307"></a>00307             [<span class="keyword">set</span>( obj ) release];
<a name="l00308"></a>00308         }
<a name="l00309"></a>00309 <span class="preprocessor">#ifndef OOCopyImmutable</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span><span class="preprocessor">#define OOCopyImmutable set</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span>        <span class="comment">// alternate strategy to ensure mutability</span>
<a name="l00312"></a>00312         <span class="comment">// does not work for objects in containers</span>
<a name="l00313"></a>00313         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( [<a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> <span class="keyword">class</span>] != <a class="code" href="class_o_o_reference.html#6c26ab66e0e0473d2c7af3e76feb2ce8">classOfReference</a>() )
<a name="l00314"></a>00314             <a class="code" href="class_o_o_reference.html#d715f9b65096c4e682254f9af15a77fa">copy</a>( <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> );
<a name="l00315"></a>00315 <span class="preprocessor">#endif</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>;
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318     
<a name="l00319"></a>00319     <span class="comment">// get existing ref</span>
<a name="l00320"></a><a class="code" href="class_o_o_reference.html#08ee48aeaa029f4efb4c80a1fb43c732">00320</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <span class="keyword">get</span>() <span class="keyword">const</span> {
<a name="l00321"></a>00321         <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     <span class="comment">// cast operators</span>
<a name="l00325"></a><a class="code" href="class_o_o_reference.html#516abdbb6e2615c0c2b6144e0d326103">00325</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html#516abdbb6e2615c0c2b6144e0d326103">operator RTYPE </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }
<a name="l00326"></a><a class="code" href="class_o_o_reference.html#d78b0213a70cee54eeed61f6e3ccc0c2">00326</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#d78b0213a70cee54eeed61f6e3ccc0c2">operator -&gt; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }
<a name="l00327"></a><a class="code" href="class_o_o_reference.html#c1fca63e89a5d1078a4c07adf54cf0c2">00327</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#c1fca63e89a5d1078a4c07adf54cf0c2">operator &amp; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">autoget</a>(); }
<a name="l00328"></a><a class="code" href="class_o_o_reference.html#5cd0e98a3b6131e6e344f8f27fbb643f">00328</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> RTYPE <a class="code" href="class_o_o_reference.html#5cd0e98a3b6131e6e344f8f27fbb643f">operator * </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !*<span class="keyword">this</span> ? nil : <span class="keyword">get</span>(); }
<a name="l00329"></a><a class="code" href="class_o_o_reference.html#a6f684ea72ca44009f6bfa54e4cbbab0">00329</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_reference.html#a6f684ea72ca44009f6bfa54e4cbbab0">operator ! </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> || <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> == (id)kCFNull; }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="comment">// assign (mutable) copy from source</span>
<a name="l00332"></a><a class="code" href="class_o_o_reference.html#fd7bdf09163b0988aca7b1b6ef6802fd">00332</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#fd7bdf09163b0988aca7b1b6ef6802fd">operator &lt;&lt;= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;val ) { [<span class="keyword">set</span>( [val.<a class="code" href="class_o_o_reference.html#08ee48aeaa029f4efb4c80a1fb43c732">get</a>() mutableCopy] ) release]; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00333"></a>00333     
<a name="l00334"></a>00334     <span class="comment">// assigment by reference</span>
<a name="l00335"></a><a class="code" href="class_o_o_reference.html#9a27054d7666ba5ce0626b2beed91c49">00335</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#9a27054d7666ba5ce0626b2beed91c49">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;val ) { <span class="keyword">set</span>( val.<a class="code" href="class_o_o_reference.html#08ee48aeaa029f4efb4c80a1fb43c732">get</a>() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00336"></a><a class="code" href="class_o_o_reference.html#d0aabec0fd8a0c72e11571858038f2ab">00336</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#9a27054d7666ba5ce0626b2beed91c49">operator = </a>( CFNullRef val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00337"></a><a class="code" href="class_o_o_reference.html#c3cf07ad8d258afce542692669a2b302">00337</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#9a27054d7666ba5ce0626b2beed91c49">operator = </a>( RTYPE val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00338"></a><a class="code" href="class_o_o_reference.html#748fb388fccb09503fa3d87b028f8269">00338</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#9a27054d7666ba5ce0626b2beed91c49">operator = </a>( <span class="keywordtype">int</span> val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     <span class="comment">// comparison</span>
<a name="l00341"></a><a class="code" href="class_o_o_reference.html#37c5cc611b208d4a1754996cfd227023">00341</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_reference.html#37c5cc611b208d4a1754996cfd227023">operator == </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqual:val.<a class="code" href="class_o_o_reference.html#08ee48aeaa029f4efb4c80a1fb43c732">get</a>()]; }
<a name="l00342"></a><a class="code" href="class_o_o_reference.html#d91e3f88e4f1d4150be8d3c66bd88e39">00342</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_reference.html#d91e3f88e4f1d4150be8d3c66bd88e39">operator != </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !*<span class="keyword">this</span> == val; }
<a name="l00343"></a>00343     <span class="comment"></span>
<a name="l00344"></a>00344 <span class="comment">    /// for OOArray&lt;id&gt;</span>
<a name="l00345"></a><a class="code" href="class_o_o_reference.html#c33b85dc45cf37ab0abde05bacd40818">00345</a> <span class="comment"></span>    <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> &amp;<a class="code" href="class_o_o_reference.html#c33b85dc45cf37ab0abde05bacd40818" title="for OOArray&amp;lt;id&amp;gt;">operator += </a>( <span class="keywordtype">id</span> val ) {
<a name="l00346"></a>00346         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() addObject:val];
<a name="l00347"></a>00347         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349     
<a name="l00350"></a>00350     <span class="comment">// might be useful...</span>
<a name="l00351"></a><a class="code" href="class_o_o_reference.html#801135d45873c42a6f60ffc5b25c4ba7">00351</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">id</span> <a class="code" href="class_o_o_reference.html#801135d45873c42a6f60ffc5b25c4ba7">operator [] </a>( NSString *key )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a> valueForKey:key]; }
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="class_o_o_reference.html#68b72441b23c571e7a55e02e248c3c6b">00353</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_reference.html">OOReference</a> <a class="code" href="class_o_o_reference.html#68b72441b23c571e7a55e02e248c3c6b">operator ~ </a>() {
<a name="l00354"></a>00354         <span class="comment">// take temporary ref and return it</span>
<a name="l00355"></a>00355         <span class="comment">// in case &amp;~var construct is used</span>
<a name="l00356"></a>00356         <a class="code" href="class_o_o_reference.html">OOReference</a> save = <a class="code" href="class_o_o_reference.html#2ba2fbd302015f90745aa718efe10bce">ref</a>;
<a name="l00357"></a>00357         <a class="code" href="class_o_o_reference.html#ffd3fa4d7826b4a8cecb3424b84f3fef">detruct</a>();
<a name="l00358"></a>00358         <span class="keywordflow">return</span> save;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 };
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="comment">/*=================================================================================*/</span>
<a name="l00364"></a>00364 <span class="comment">/*=============================== Array classes ===================================*/</span>
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 <span class="comment"></span>
<a name="l00367"></a>00367 <span class="comment">/**</span>
<a name="l00368"></a>00368 <span class="comment"> NSMutableArray wrapper allowing subscript syntax by index and various other operators.</span>
<a name="l00369"></a>00369 <span class="comment"> The integer value of an OArray object is the number of elements e.g. "for ( i=0 ; i&lt;array ; i++ )".</span>
<a name="l00370"></a>00370 <span class="comment"> </span>
<a name="l00371"></a>00371 <span class="comment"> &lt;table cellspacing=0&gt;&lt;tr&gt;&lt;th&gt;operator&lt;th&gt;inplace&lt;th&gt;binary&lt;th&gt;argument</span>
<a name="l00372"></a>00372 <span class="comment"> &lt;tr&gt;&lt;td&gt;assignment&lt;td&gt;&amp;nbsp;&lt;td&gt;=&lt;td&gt;array</span>
<a name="l00373"></a>00373 <span class="comment"> &lt;tr&gt;&lt;td&gt;copy&lt;td&gt;&amp;nbsp;&lt;td&gt;&amp;lt;&amp;lt;=&lt;td&gt;array</span>
<a name="l00374"></a>00374 <span class="comment"> &lt;tr&gt;&lt;td&gt;add object(s)&lt;td&gt;+=&lt;td&gt;+&lt;td&gt;object (or array)</span>
<a name="l00375"></a>00375 <span class="comment"> &lt;tr&gt;&lt;td&gt;remove object(s)&lt;td&gt;-=&lt;td&gt;-&lt;td&gt;object (or array)</span>
<a name="l00376"></a>00376 <span class="comment"> &lt;tr&gt;&lt;td&gt;replicate members(s)&lt;td&gt;*=&lt;td&gt;*&lt;td&gt;count</span>
<a name="l00377"></a>00377 <span class="comment"> &lt;tr&gt;&lt;td&gt;split alternate members&lt;td&gt;&lt;td&gt;/&lt;td&gt;count e.g 2 for even/odd members</span>
<a name="l00378"></a>00378 <span class="comment"> &lt;tr&gt;&lt;td&gt;filter array&lt;td&gt;&amp;=&lt;td&gt;&amp;&lt;td&gt;array</span>
<a name="l00379"></a>00379 <span class="comment"> &lt;tr&gt;&lt;td&gt;merge array&lt;td&gt;|=&lt;td&gt;|&lt;td&gt;array</span>
<a name="l00380"></a>00380 <span class="comment"> &lt;tr&gt;&lt;td&gt;subscript&lt;td&gt;&amp;nbsp;&lt;td&gt;[]&lt;td&gt;int, object or range</span>
<a name="l00381"></a>00381 <span class="comment"> &lt;/table&gt;</span>
<a name="l00382"></a>00382 <span class="comment"> </span>
<a name="l00383"></a>00383 <span class="comment"> Usage:</span>
<a name="l00384"></a>00384 <span class="comment"> &lt;pre&gt;</span>
<a name="l00385"></a>00385 <span class="comment"> \@interface ExampleClass {</span>
<a name="l00386"></a>00386 <span class="comment">    OOArray array;</span>
<a name="l00387"></a>00387 <span class="comment"> }</span>
<a name="l00388"></a>00388 <span class="comment"> \@end</span>
<a name="l00389"></a>00389 <span class="comment"> </span>
<a name="l00390"></a>00390 <span class="comment"> \@implementation ExampleClass</span>
<a name="l00391"></a>00391 <span class="comment"> - (void) aFunction {</span>
<a name="l00392"></a>00392 <span class="comment">     array += @"STRING"; // append to array</span>
<a name="l00393"></a>00393 <span class="comment">     array[1] = @"STRING"; // set position directly</span>
<a name="l00394"></a>00394 <span class="comment">     NSString *str = &amp;amp;array[1]; // take polinter to item 1</span>
<a name="l00395"></a>00395 <span class="comment">     ~array[0]; // remove element at position 0</span>
<a name="l00396"></a>00396 <span class="comment"> }</span>
<a name="l00397"></a>00397 <span class="comment"></span>
<a name="l00398"></a>00398 <span class="comment"> - (NSMutableArray *)function {</span>
<a name="l00399"></a>00399 <span class="comment"> OOArray&lt;NSString *&gt; array; // declare array of strings</span>
<a name="l00400"></a>00400 <span class="comment"> for ( int i=0 ; i&lt;20 )</span>
<a name="l00401"></a>00401 <span class="comment"> array[i] = @"STRING";</span>
<a name="l00402"></a>00402 <span class="comment"> return &amp;amp;array; // return autoreleasing pointer to array allocated</span>
<a name="l00403"></a>00403 <span class="comment"> }</span>
<a name="l00404"></a>00404 <span class="comment"> </span>
<a name="l00405"></a>00405 <span class="comment"> \@end</span>
<a name="l00406"></a>00406 <span class="comment"> &lt;/pre&gt; </span>
<a name="l00407"></a>00407 <span class="comment"> */</span>
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l00410"></a><a class="code" href="class_o_o_array.html">00410</a> <span class="keyword">class </span><a class="code" href="class_o_o_array.html">OOArray</a> : <span class="keyword">public</span> <a class="code" href="class_o_o_reference.html">OOReference</a>&lt;NSMutableArray *&gt; {
<a name="l00411"></a>00411 <span class="keyword">public</span>:
<a name="l00412"></a><a class="code" href="class_o_o_array.html#726247687dc7e8378e23c0e9ee637e96">00412</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#726247687dc7e8378e23c0e9ee637e96">OOArray</a>() {}
<a name="l00413"></a><a class="code" href="class_o_o_array.html#0f62cf6737a10b5f8e26be33cfc106ad">00413</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#0f62cf6737a10b5f8e26be33cfc106ad">OOArray</a>( <span class="keywordtype">id</span> obj ) { *<span class="keyword">this</span> = obj; }
<a name="l00414"></a><a class="code" href="class_o_o_array.html#de5736a95591c9dc92cc95a4f3f21fed">00414</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#de5736a95591c9dc92cc95a4f3f21fed">OOArray</a>( CFNullRef obj ) { <span class="keyword">set</span>( (id)obj ); }
<a name="l00415"></a><a class="code" href="class_o_o_array.html#5ced56a0c4015ba32df3322dddf48574">00415</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#5ced56a0c4015ba32df3322dddf48574">OOArray</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;arr ) { *<span class="keyword">this</span> = arr; }
<a name="l00416"></a><a class="code" href="class_o_o_array.html#272ef5882cd53d691e5cc97d0c0e2867">00416</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#272ef5882cd53d691e5cc97d0c0e2867">OOArray</a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00417"></a><a class="code" href="class_o_o_array.html#e9cbb9892a5b76d44fc670efcf7d6521">00417</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#e9cbb9892a5b76d44fc670efcf7d6521">OOArray</a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00418"></a><a class="code" href="class_o_o_array.html#86f55bb9a15d91f0bcbe3e7d026b333e">00418</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#86f55bb9a15d91f0bcbe3e7d026b333e">OOArray</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_subscript.html">OOSubscript&lt;OOString,NSMutableDictionary *,OOString&gt;</a> &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00419"></a><a class="code" href="class_o_o_array.html#f48defefc92911c9ec7d96d543037c81">00419</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#f48defefc92911c9ec7d96d543037c81">OOArray</a>( <span class="keyword">const</span> OOArraySlice&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00420"></a><a class="code" href="class_o_o_array.html#45f5c2788d00763f52b6e7e684d17099">00420</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#45f5c2788d00763f52b6e7e684d17099">OOArray</a>( <span class="keyword">const</span> OODictionarySlice&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00421"></a><a class="code" href="class_o_o_array.html#b9cbdee4b9e2b4db4c6fadc9b10ce440">00421</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#b9cbdee4b9e2b4db4c6fadc9b10ce440">OOArray</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;arr ) { *<span class="keyword">this</span> = arr; }
<a name="l00422"></a><a class="code" href="class_o_o_array.html#180884ad2e681eb4fd52827e41de3127">00422</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#180884ad2e681eb4fd52827e41de3127">OOArray</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary&lt;ETYPE&gt;</a> &amp;dict ) { *<span class="keyword">this</span> = dict.get(); }
<a name="l00423"></a><a class="code" href="class_o_o_array.html#e33e2198637876762c212e12a674360b">00423</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#e33e2198637876762c212e12a674360b">OOArray</a>( <span class="keywordtype">int</span> nilOrCapacity ) { *<span class="keyword">this</span> = nilOrCapacity; }
<a name="l00424"></a><a class="code" href="class_o_o_array.html#6c7b0d7df216e82fd9e21696998bc343">00424</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#6c7b0d7df216e82fd9e21696998bc343">OOArray</a>( NSMutableArray *arr ) { *<span class="keyword">this</span> = arr; }
<a name="l00425"></a><a class="code" href="class_o_o_array.html#eba7368632829bec56b24107b9c879c4">00425</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#eba7368632829bec56b24107b9c879c4">OOArray</a>( NSArray *arr ) { *<span class="keyword">this</span> = arr; }
<a name="l00426"></a><a class="code" href="class_o_o_array.html#79270defbe451bd196e18eba588ffe37">00426</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#79270defbe451bd196e18eba588ffe37">OOArray</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) { *<span class="keyword">this</span> = val; }
<a name="l00427"></a><a class="code" href="class_o_o_array.html#cf4355634497fca8bfcdfd8193b8cbde">00427</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#cf4355634497fca8bfcdfd8193b8cbde">OOArray</a>( <span class="keywordtype">id</span> e1, <span class="keywordtype">id</span> e2, ... ) {
<a name="l00428"></a>00428         va_list argp; va_start(argp, e2);
<a name="l00429"></a>00429         *<span class="keyword">this</span> += ETYPE(e1);
<a name="l00430"></a>00430         <span class="keywordflow">while</span> ( e2 ) {
<a name="l00431"></a>00431             *<span class="keyword">this</span> += ETYPE(e2);
<a name="l00432"></a>00432             e2 = va_arg( argp, <span class="keywordtype">id</span> );
<a name="l00433"></a>00433         }
<a name="l00434"></a>00434         va_end( argp );
<a name="l00435"></a>00435     }
<a name="l00436"></a>00436     
<a name="l00437"></a><a class="code" href="class_o_o_array.html#12c87cf6b0b15b0cafd36fa298864ce2">00437</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> NSMutableArray *<a class="code" href="class_o_o_array.html#12c87cf6b0b15b0cafd36fa298864ce2">operator &amp; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">autoget</a>(); }
<a name="l00438"></a><a class="code" href="class_o_o_array.html#076abf26184318c8cd96b3dec8f97dcd">00438</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html#076abf26184318c8cd96b3dec8f97dcd">operator int </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !*<span class="keyword">this</span> ? 0 : [<span class="keyword">get</span>() count]; }
<a name="l00439"></a>00439     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">int</span> <a class="code" href="class_o_o_array.html#1e7079a0aba1c778825f296458cae8cf">fetch</a>( <span class="keywordtype">id</span> parent = nil, <span class="keyword">const</span> <a class="code" href="class_o_o_string.html">OOString</a> &amp;sql = nil );
<a name="l00440"></a>00440     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_string.html">OOString</a> <a class="code" href="class_o_o_array.html#31b92383c51d9e2986f9f058f01701c8">join</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_string.html">OOString</a> &amp;sep = <span class="stringliteral">@" "</span> ) <span class="keyword">const</span>;
<a name="l00441"></a>00441     
<a name="l00442"></a><a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">00442</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keywordtype">id</span> val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00443"></a><a class="code" href="class_o_o_array.html#fbc02e037ce1718b36e3ecc8fe23ea0d">00443</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( NSMutableArray *val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00444"></a><a class="code" href="class_o_o_array.html#c942415985226e41e7eadb47fbc977d9">00444</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( NSArray *val ) { OOCopyImmutable( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00445"></a><a class="code" href="class_o_o_array.html#b56c1ce71c40a773a077f18585c7ab5c">00445</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keywordtype">int</span> nilOrCapacity ) { <span class="keyword">set</span>( nilOrCapacity ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00446"></a><a class="code" href="class_o_o_array.html#9b1f9564f51a89853e47340f4682f3cd">00446</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00447"></a><a class="code" href="class_o_o_array.html#79113723d464e5bb316eff52c1d4bfc0">00447</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00448"></a><a class="code" href="class_o_o_array.html#974d21f809a0bb6605fdc9ee0dedd913">00448</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00449"></a><a class="code" href="class_o_o_array.html#394ee74cd280edcf9b2165d9aa9ed397">00449</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> OOArraySlice&lt;ETYPE&gt; &amp;val ) { OOCopyImmutable( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00450"></a><a class="code" href="class_o_o_array.html#5a82c193e31aecd6868b1a731871a4a7">00450</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> OODictionarySlice&lt;ETYPE&gt; &amp;val ) { OOCopyImmutable( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00451"></a><a class="code" href="class_o_o_array.html#00eac779c62aff51b01cca740622005a">00451</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00452"></a><a class="code" href="class_o_o_array.html#f8692e91d4c20dd8fb20e4716bf0e528">00452</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( NSMutableDictionary *val ) {
<a name="l00453"></a>00453 <span class="preprocessor">#if 0</span>
<a name="l00454"></a>00454 <span class="preprocessor"></span>        <span class="comment">// objxml.h support</span>
<a name="l00455"></a>00455         <span class="keywordflow">if</span> ( [val objectForKey:kOOChildren] ) {
<a name="l00456"></a>00456             [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() setArray:[val objectForKey:kOOChildren]];
<a name="l00457"></a>00457             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459 <span class="preprocessor">#endif</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span>        <a class="code" href="class_o_o_array.html">OOArray&lt;id&gt;</a> keys = [val allKeys];
<a name="l00461"></a>00461         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeAllObjects];
<a name="l00462"></a>00462         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;keys ; i++ ) {
<a name="l00463"></a>00463             *<span class="keyword">this</span> += (ETYPE)[*keys objectAtIndex:i];
<a name="l00464"></a>00464             *<span class="keyword">this</span> += (ETYPE)[val objectForKey:keys[i]];
<a name="l00465"></a>00465         }
<a name="l00466"></a>00466         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#6dd4926a7a5925c1f88f04b2a6367273">operator = </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val );
<a name="l00469"></a>00469 
<a name="l00470"></a><a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">00470</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( NSArray *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToArray:val]; }
<a name="l00471"></a><a class="code" href="class_o_o_array.html#1dc3ad63a27f27e17d44392c4bfdbb96">00471</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#1dc3ad63a27f27e17d44392c4bfdbb96">operator != </a>( NSArray *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( val ); }
<a name="l00472"></a><a class="code" href="class_o_o_array.html#a47b76e45905333aef69f34bb4dcab4d">00472</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( NSMutableArray *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToArray:val]; }
<a name="l00473"></a><a class="code" href="class_o_o_array.html#567b67b4d9444fc61adac1038155d647">00473</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#1dc3ad63a27f27e17d44392c4bfdbb96">operator != </a>( NSMutableArray *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( val ); }
<a name="l00474"></a><a class="code" href="class_o_o_array.html#3d26e52f9b8587a6717534dea6e1c4bb">00474</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToArray:val]; }
<a name="l00475"></a><a class="code" href="class_o_o_array.html#681e41d61a6856b604d73d7d56e1417b">00475</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_array.html#1dc3ad63a27f27e17d44392c4bfdbb96">operator != </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_array.html#ffe7baa68895a52323215f07238cb3b8">operator == </a>( val ); }
<a name="l00476"></a>00476     
<a name="l00477"></a>00477     <span class="comment">// add elements</span>
<a name="l00478"></a><a class="code" href="class_o_o_array.html#86a0ee48c2f4c41399605fab453882e1">00478</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#86a0ee48c2f4c41399605fab453882e1">operator += </a>( ETYPE val ) {
<a name="l00479"></a>00479         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() addObject:!val ? (ETYPE)kCFNull : val];
<a name="l00480"></a>00480         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00481"></a>00481     }
<a name="l00482"></a><a class="code" href="class_o_o_array.html#d51a713c50e3390f8030ab02d255844b">00482</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#86a0ee48c2f4c41399605fab453882e1">operator += </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) {
<a name="l00483"></a>00483         *<span class="keyword">this</span> += (ETYPE)val;
<a name="l00484"></a>00484         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00485"></a>00485     }
<a name="l00486"></a><a class="code" href="class_o_o_array.html#e89f43d2de5524eff9be9a348371ac0e">00486</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#86a0ee48c2f4c41399605fab453882e1">operator += </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) {
<a name="l00487"></a>00487         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() addObjectsFromArray:val.get()];
<a name="l00488"></a>00488         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490     
<a name="l00491"></a>00491     <span class="comment">// remove elements (not returning it)</span>
<a name="l00492"></a><a class="code" href="class_o_o_array.html#62cc84f3b8ddbae3f89aa7e29611ea56">00492</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#62cc84f3b8ddbae3f89aa7e29611ea56">operator -= </a>( <span class="keywordtype">int</span> sub ) {
<a name="l00493"></a>00493         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObjectAtIndex:sub &lt; 0 ? (int)*<span class="keyword">this</span>+sub : sub];
<a name="l00494"></a>00494         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00495"></a>00495     }
<a name="l00496"></a><a class="code" href="class_o_o_array.html#dce17095b1ae1a70977c96a6347a10db">00496</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#62cc84f3b8ddbae3f89aa7e29611ea56">operator -= </a>( ETYPE val ) {
<a name="l00497"></a>00497         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObject:val];
<a name="l00498"></a>00498         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00499"></a>00499     }
<a name="l00500"></a><a class="code" href="class_o_o_array.html#6cec28e9db8b45f121f2aa204000de88">00500</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#62cc84f3b8ddbae3f89aa7e29611ea56">operator -= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) {
<a name="l00501"></a>00501         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObjectsInArray:val.get()];
<a name="l00502"></a>00502         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504     
<a name="l00505"></a>00505     <span class="comment">// replicate</span>
<a name="l00506"></a><a class="code" href="class_o_o_array.html#defc05daed9731f80a6fe29c8948c289">00506</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> &amp;<a class="code" href="class_o_o_array.html#defc05daed9731f80a6fe29c8948c289">operator *= </a>( NSUInteger count ) {
<a name="l00507"></a>00507         NSArray *arr = [[<span class="keyword">get</span>() <a class="code" href="class_o_o_reference.html#d715f9b65096c4e682254f9af15a77fa">copy</a>] autorelease];
<a name="l00508"></a>00508         [<span class="keyword">get</span>() removeAllObjects];
<a name="l00509"></a>00509         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;count ; i++ )
<a name="l00510"></a>00510             *<span class="keyword">this</span> += arr;
<a name="l00511"></a>00511         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513     
<a name="l00514"></a><a class="code" href="class_o_o_array.html#d671f3442b063294f79c02616b298ed8">00514</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#d671f3442b063294f79c02616b298ed8">operator &amp;= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) {
<a name="l00515"></a>00515         NSArray *in = [[<span class="keyword">get</span>() <a class="code" href="class_o_o_reference.html#d715f9b65096c4e682254f9af15a77fa">copy</a>] autorelease];
<a name="l00516"></a>00516         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=[in count]-1 ; i&gt;=0 ; i-- ) {
<a name="l00517"></a>00517             <span class="keywordtype">id</span> o = [in objectAtIndex:i];
<a name="l00518"></a>00518             <span class="keywordflow">if</span> ( !val || [val.get() indexOfObject:o] == NSNotFound )
<a name="l00519"></a>00519                 [<span class="keyword">get</span>() removeObjectAtIndex:i];
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00522"></a>00522     }
<a name="l00523"></a><a class="code" href="class_o_o_array.html#dd7633e7113421ae5afa6804b965e795">00523</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#dd7633e7113421ae5afa6804b965e795">operator |= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) {
<a name="l00524"></a>00524         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;[*val count] ; i++ ) {
<a name="l00525"></a>00525             <span class="keywordtype">id</span> o = [val.get() objectAtIndex:i];
<a name="l00526"></a>00526             <span class="keywordflow">if</span> ( [<span class="keyword">get</span>() indexOfObject:o] == NSNotFound )
<a name="l00527"></a>00527                 [<span class="keyword">get</span>() addObject:o];
<a name="l00528"></a>00528         }
<a name="l00529"></a>00529         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531     
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     <span class="comment">// binary equivalents</span>
<a name="l00534"></a><a class="code" href="class_o_o_array.html#76462556314ed14ba72a12d578a6acee">00534</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#1c9aee46d87a81a9aaeb6a5e087ad895">operator + </a>( ETYPE val )<span class="keyword"> const </span>{
<a name="l00535"></a>00535         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr += val; <span class="keywordflow">return</span> arr;
<a name="l00536"></a>00536     }
<a name="l00537"></a><a class="code" href="class_o_o_array.html#131d5664c1fa1ebfc0f03a02e20d2a08">00537</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#be33e3fb0d14ae6016a04143664cecea">operator - </a>( ETYPE val )<span class="keyword"> const </span>{
<a name="l00538"></a>00538         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr -= val; <span class="keywordflow">return</span> arr;
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540 
<a name="l00541"></a><a class="code" href="class_o_o_array.html#48d3e68dd581dc667c9c9d47d1a12889">00541</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#1c9aee46d87a81a9aaeb6a5e087ad895">operator + </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val )<span class="keyword"> const </span>{ 
<a name="l00542"></a>00542         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr += val; <span class="keywordflow">return</span> arr;
<a name="l00543"></a>00543     }
<a name="l00544"></a><a class="code" href="class_o_o_array.html#85cb71ac55f6ecdc277f0c9b21e2ebea">00544</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#be33e3fb0d14ae6016a04143664cecea">operator - </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val )<span class="keyword"> const </span>{ 
<a name="l00545"></a>00545         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr -= val; <span class="keywordflow">return</span> arr;
<a name="l00546"></a>00546     }
<a name="l00547"></a><a class="code" href="class_o_o_array.html#3b2ab3eb225b419390fd7b91f2085c2b">00547</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#12c87cf6b0b15b0cafd36fa298864ce2">operator &amp; </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val )<span class="keyword"> const </span>{ 
<a name="l00548"></a>00548         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr &amp;= val; <span class="keywordflow">return</span> arr;
<a name="l00549"></a>00549     }
<a name="l00550"></a><a class="code" href="class_o_o_array.html#03a444daed44df331be5fbe3fd6a9820">00550</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#03a444daed44df331be5fbe3fd6a9820">operator | </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val )<span class="keyword"> const </span>{
<a name="l00551"></a>00551         <a class="code" href="class_o_o_array.html">OOArray</a> arr; arr &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); arr |= val; <span class="keywordflow">return</span> arr;
<a name="l00552"></a>00552     }   
<a name="l00553"></a>00553 
<a name="l00554"></a>00554     <span class="comment">// subscript into array</span>
<a name="l00555"></a><a class="code" href="class_o_o_array.html#ef3ba9af893ebd010b2a3022bbd30095">00555</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub&lt;ETYPE&gt; <a class="code" href="class_o_o_array.html#ef3ba9af893ebd010b2a3022bbd30095">operator [] </a>( <span class="keywordtype">int</span> sub )<span class="keyword"> const  </span>{
<a name="l00556"></a>00556         <span class="keywordflow">return</span> OOArraySub&lt;ETYPE&gt;( <span class="keyword">this</span>, sub );
<a name="l00557"></a>00557     }
<a name="l00558"></a><a class="code" href="class_o_o_array.html#6485d4eaf8c803e88c5533c585606f4e">00558</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub&lt;ETYPE&gt; <a class="code" href="class_o_o_array.html#ef3ba9af893ebd010b2a3022bbd30095">operator [] </a>( ETYPE sub )<span class="keyword"> const </span>{
<a name="l00559"></a>00559         <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[[<span class="keyword">get</span>() indexOfObject:sub]];
<a name="l00560"></a>00560     }
<a name="l00561"></a><a class="code" href="class_o_o_array.html#b6b87ca31abb8a45b5a28bfbbb77ab7d">00561</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice&lt;ETYPE&gt; <a class="code" href="class_o_o_array.html#ef3ba9af893ebd010b2a3022bbd30095">operator [] </a>( <span class="keyword">const</span> NSRange &amp;subs )<span class="keyword"> const </span>{
<a name="l00562"></a>00562         <span class="keywordflow">return</span> OOArraySlice&lt;ETYPE&gt;( <span class="keyword">this</span>, subs );
<a name="l00563"></a>00563     }
<a name="l00564"></a>00564     
<a name="l00565"></a>00565     <span class="comment">// sort array (of strings)</span>
<a name="l00566"></a><a class="code" href="class_o_o_array.html#1c9aee46d87a81a9aaeb6a5e087ad895">00566</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="objcpp_8h.html#a71d43d536418b90e3a25dec625c8c24">OOStringArray</a> <a class="code" href="class_o_o_array.html#1c9aee46d87a81a9aaeb6a5e087ad895">operator + </a>()<span class="keyword"> const </span>{
<a name="l00567"></a>00567         <span class="keywordflow">return</span> [<span class="keyword">get</span>() sortedArrayUsingSelector:<span class="keyword">@selector</span>(caseInsensitiveCompare:)];
<a name="l00568"></a>00568     }   
<a name="l00569"></a>00569     
<a name="l00570"></a>00570     <span class="comment">// array in reverse order</span>
<a name="l00571"></a><a class="code" href="class_o_o_array.html#be33e3fb0d14ae6016a04143664cecea">00571</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray</a> <a class="code" href="class_o_o_array.html#be33e3fb0d14ae6016a04143664cecea">operator - </a>()<span class="keyword"> const </span>{
<a name="l00572"></a>00572         <span class="keywordflow">return</span> [[<span class="keyword">get</span>() reverseObjectEnumerator] allObjects];
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <span class="comment">// shift first element</span>
<a name="l00576"></a><a class="code" href="class_o_o_array.html#0ba172744acd7a49de75001440cb9363">00576</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_array.html#0ba172744acd7a49de75001440cb9363">operator -- </a>() {
<a name="l00577"></a>00577         <span class="keywordflow">return</span> ~(*this)[0];
<a name="l00578"></a>00578     }
<a name="l00579"></a>00579     
<a name="l00580"></a>00580     <span class="comment">// pop last element</span>
<a name="l00581"></a><a class="code" href="class_o_o_array.html#e0acebf6d49f49923f4cd8c219ee22ef">00581</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_array.html#0ba172744acd7a49de75001440cb9363">operator -- </a>( <span class="keywordtype">int</span> ) {
<a name="l00582"></a>00582         <span class="keywordflow">return</span> ~(*this)[-1];
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 };
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l00587"></a><a class="code" href="objcpp_8h.html#e90a5c829d857224b50dd5736c132e45">00587</a> <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> <a class="code" href="objcpp_8h.html#e90a5c829d857224b50dd5736c132e45">operator * </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> &amp;left, <span class="keywordtype">int</span> count ) {
<a name="l00588"></a>00588     <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> out( (<span class="keywordtype">int</span>)left*count );
<a name="l00589"></a>00589     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;count ; i++ ) 
<a name="l00590"></a>00590         out += left;
<a name="l00591"></a>00591     <span class="keywordflow">return</span> out;
<a name="l00592"></a>00592 }
<a name="l00593"></a>00593 
<a name="l00594"></a>00594 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l00595"></a><a class="code" href="objcpp_8h.html#794e01a41349fac2e504f2761fc1312b">00595</a> <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> <a class="code" href="objcpp_8h.html#794e01a41349fac2e504f2761fc1312b">operator / </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> &amp;left, <span class="keywordtype">int</span> count ) {
<a name="l00596"></a>00596     <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> out( count );
<a name="l00597"></a>00597     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;left ; i++ ) 
<a name="l00598"></a>00598         out[i%count][i/count] = left[i];
<a name="l00599"></a>00599     <span class="keywordflow">return</span> out;
<a name="l00600"></a>00600 }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 <span class="comment">/*=================================================================================*/</span>
<a name="l00604"></a>00604 <span class="comment">/*============================== Dictionary classes ===============================*/</span>
<a name="l00605"></a>00605 <span class="comment"></span>
<a name="l00606"></a>00606 <span class="comment">/**</span>
<a name="l00607"></a>00607 <span class="comment"> NSMutableDictionary wrapper for use in instance variables which allows subscripting</span>
<a name="l00608"></a>00608 <span class="comment"> by the key value. Use &amp;~dict[@"key"] to remove the entry and return it with expression</span>
<a name="l00609"></a>00609 <span class="comment"> or autorelease scope. Subscripting can be applied recusively. ETYPE is type of leaf node.</span>
<a name="l00610"></a>00610 <span class="comment"> </span>
<a name="l00611"></a>00611 <span class="comment"> Operators:</span>
<a name="l00612"></a>00612 <span class="comment"> &lt;table cellspacing=0&gt;&lt;tr&gt;&lt;th&gt;operator&lt;th&gt;inplace&lt;th&gt;arguments</span>
<a name="l00613"></a>00613 <span class="comment"> &lt;tr&gt;&lt;td&gt;take referernce&lt;td&gt;=&lt;td&gt;dictionary</span>
<a name="l00614"></a>00614 <span class="comment"> &lt;tr&gt;&lt;td&gt;take copy&lt;td&gt;&amp;lt;&amp;lt;=&lt;td&gt;dictionary</span>
<a name="l00615"></a>00615 <span class="comment"> &lt;tr&gt;&lt;td&gt;merge entries&lt;td&gt;+=&lt;td&gt;dictionary</span>
<a name="l00616"></a>00616 <span class="comment"> &lt;tr&gt;&lt;td&gt;remove entries&lt;td&gt;-=&lt;td&gt;key or array</span>
<a name="l00617"></a>00617 <span class="comment"> &lt;tr&gt;&lt;td&gt;sbuscript&lt;td&gt;[]&lt;td&gt;object (key) or "slice" of keys</span>
<a name="l00618"></a>00618 <span class="comment"> &lt;/table&gt;</span>
<a name="l00619"></a>00619 <span class="comment"> </span>
<a name="l00620"></a>00620 <span class="comment"> Usage:</span>
<a name="l00621"></a>00621 <span class="comment"> &lt;pre&gt;</span>
<a name="l00622"></a>00622 <span class="comment"></span>
<a name="l00623"></a>00623 <span class="comment"> - (void)function:(OODictionary&lt;NSString *&gt; &amp;)dict {</span>
<a name="l00624"></a>00624 <span class="comment">    dict[@"ONE"][@"TWO"][@"THREE"] = @"Four"; // set valule</span>
<a name="l00625"></a>00625 <span class="comment">    NSString *str = *dict[@"ONE"][@"TWO"][@"THREE"]; // get value</span>
<a name="l00626"></a>00626 <span class="comment">    ~dict[@"ONE"][@"TWO"][@"THREE"]; // delete value</span>
<a name="l00627"></a>00627 <span class="comment">    // pointer "str" is invalid at this point</span>
<a name="l00628"></a>00628 <span class="comment"> }</span>
<a name="l00629"></a>00629 <span class="comment"> </span>
<a name="l00630"></a>00630 <span class="comment"> - (void)function:(NSMutableDictionary *)dict {</span>
<a name="l00631"></a>00631 <span class="comment"> OODictionary&lt;OOString&gt; ref &lt;&lt;= dict; // initialise mutable copy</span>
<a name="l00632"></a>00632 <span class="comment"> ref[@"KEY"] &lt;&lt;= @"";</span>
<a name="l00633"></a>00633 <span class="comment"> for ( int i=0 ; i&lt;10 ; i++ )</span>
<a name="l00634"></a>00634 <span class="comment"> ref[@"KEY"] += "ABC";</span>
<a name="l00635"></a>00635 <span class="comment"> }</span>
<a name="l00636"></a>00636 <span class="comment"> </span>
<a name="l00637"></a>00637 <span class="comment"> &lt;/pre&gt;</span>
<a name="l00638"></a>00638 <span class="comment"> */</span>
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l00641"></a><a class="code" href="class_o_o_dictionary.html">00641</a> <span class="keyword">class </span><a class="code" href="class_o_o_dictionary.html">OODictionary</a> : <span class="keyword">public</span> <a class="code" href="class_o_o_reference.html">OOReference</a>&lt;NSMutableDictionary *&gt; {
<a name="l00642"></a>00642 <span class="keyword">public</span>:
<a name="l00643"></a><a class="code" href="class_o_o_dictionary.html#e52b93c7f9e0896f7c560f1050b4d967">00643</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#e52b93c7f9e0896f7c560f1050b4d967">OODictionary</a>() {}
<a name="l00644"></a><a class="code" href="class_o_o_dictionary.html#5d46485c3c4bf86b2b56598a8cc01ca7">00644</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#5d46485c3c4bf86b2b56598a8cc01ca7">OODictionary</a>( <span class="keywordtype">id</span> obj ) { *<span class="keyword">this</span> = obj; }
<a name="l00645"></a><a class="code" href="class_o_o_dictionary.html#c24ecb5d7f6f590738e5376e1102640a">00645</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#c24ecb5d7f6f590738e5376e1102640a">OODictionary</a>( CFNullRef obj ) { <span class="keyword">set</span>( (id)obj ); }
<a name="l00646"></a><a class="code" href="class_o_o_dictionary.html#8139488e46a0d97db2005bb285bd7d9e">00646</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#8139488e46a0d97db2005bb285bd7d9e">OODictionary</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;dict ) { *<span class="keyword">this</span> = dict; }
<a name="l00647"></a><a class="code" href="class_o_o_dictionary.html#21fd50fcfbad0b126f8c69588104ea9f">00647</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#21fd50fcfbad0b126f8c69588104ea9f">OODictionary</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> &amp;arr ) { *<span class="keyword">this</span> = arr.get(); }
<a name="l00648"></a><a class="code" href="class_o_o_dictionary.html#206dde80a5b4a9f9745475d9ec2d6452">00648</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#206dde80a5b4a9f9745475d9ec2d6452">OODictionary</a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00649"></a><a class="code" href="class_o_o_dictionary.html#ff49a21c9d75ed772375e26a75fa4839">00649</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#ff49a21c9d75ed772375e26a75fa4839">OODictionary</a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;sub ) { *<span class="keyword">this</span> = sub; }
<a name="l00650"></a><a class="code" href="class_o_o_dictionary.html#4d1381cf670527e72c322643bbec92e5">00650</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#4d1381cf670527e72c322643bbec92e5">OODictionary</a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); }
<a name="l00651"></a><a class="code" href="class_o_o_dictionary.html#dc0365717765a1420be9b962fda14ba7">00651</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#dc0365717765a1420be9b962fda14ba7">OODictionary</a>( <span class="keywordtype">int</span> nilOrCapacity ) { *<span class="keyword">this</span> = nilOrCapacity; }
<a name="l00652"></a><a class="code" href="class_o_o_dictionary.html#d9cdd404e98d0dba41df63a316ca9221">00652</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#d9cdd404e98d0dba41df63a316ca9221">OODictionary</a>( NSMutableDictionary *dict ) { *<span class="keyword">this</span> = dict; }
<a name="l00653"></a><a class="code" href="class_o_o_dictionary.html#ff47a4009bb906749c56723e03f3bd72">00653</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#ff47a4009bb906749c56723e03f3bd72">OODictionary</a>( NSDictionary *dict ) { *<span class="keyword">this</span> = dict; }
<a name="l00654"></a><a class="code" href="class_o_o_dictionary.html#937fba5dce772a1bdeaed04d9dfad6ae">00654</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#937fba5dce772a1bdeaed04d9dfad6ae">OODictionary</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) { *<span class="keyword">this</span> = val; }
<a name="l00655"></a><a class="code" href="class_o_o_dictionary.html#6217401ce000d2b1e1720851c4d6fb68">00655</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html#6217401ce000d2b1e1720851c4d6fb68">OODictionary</a>( <span class="keywordtype">id</span> e1, <span class="keywordtype">id</span> e2, ... ) {
<a name="l00656"></a>00656         va_list argp; va_start(argp, e2);
<a name="l00657"></a>00657         <span class="keywordflow">do</span> 
<a name="l00658"></a>00658             (*<span class="keyword">this</span>)[e1] = ETYPE(e2);
<a name="l00659"></a>00659         <span class="keywordflow">while</span> ( (e1 = va_arg( argp, <span class="keywordtype">id</span> )) &amp;&amp; (e2 = va_arg( argp, <span class="keywordtype">id</span> )) );
<a name="l00660"></a>00660         va_end( argp );
<a name="l00661"></a>00661     }
<a name="l00662"></a>00662 
<a name="l00663"></a><a class="code" href="class_o_o_dictionary.html#38debfe458b3f9d5e8ebead5ace75da3">00663</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> NSMutableDictionary *<a class="code" href="class_o_o_dictionary.html#38debfe458b3f9d5e8ebead5ace75da3">operator &amp; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">autoget</a>(); }
<a name="l00664"></a>00664 
<a name="l00665"></a><a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">00665</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keywordtype">id</span> val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00666"></a><a class="code" href="class_o_o_dictionary.html#0d6e12efa9b28ee2df985f3c8d38af03">00666</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( NSMutableDictionary *val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00667"></a><a class="code" href="class_o_o_dictionary.html#77e0d7ca0b8db6307e9bd476284e3d3a">00667</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( NSDictionary *val ) { OOCopyImmutable( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00668"></a><a class="code" href="class_o_o_dictionary.html#73070f48d2cc3525d4d3d02b6b0e19dc">00668</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keywordtype">int</span> nilOrCapacity ) { <span class="keyword">set</span>( nilOrCapacity ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00669"></a><a class="code" href="class_o_o_dictionary.html#bc443a4d93f2f3f32d25482665ca2a4e">00669</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00670"></a><a class="code" href="class_o_o_dictionary.html#d9e4ec25e48e664aa0cf9236b7d5abe7">00670</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00671"></a><a class="code" href="class_o_o_dictionary.html#28a3748c873cb2b8b88b791b86dae1d5">00671</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00672"></a><a class="code" href="class_o_o_dictionary.html#60b05e7cf61293e10b6f06c830cacc8c">00672</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00673"></a>00673 
<a name="l00674"></a><a class="code" href="class_o_o_dictionary.html#73eae18c1e5c4251b7b9691bba306376">00674</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( NSMutableArray *val ) {
<a name="l00675"></a>00675         <a class="code" href="class_o_o_array.html">OOArray&lt;id&gt;</a> keys = val;
<a name="l00676"></a>00676         <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> values = val;
<a name="l00677"></a>00677         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeAllObjects];
<a name="l00678"></a>00678         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;keys ; i+=2 )
<a name="l00679"></a>00679 #<span class="keywordflow">if</span> 00000
<a name="l00680"></a>00680             (*<span class="keyword">this</span>)[*keys[i]] = *values[i+1]; <span class="comment">/////</span>
<a name="l00681"></a>00681 <span class="comment"></span><span class="preprocessor">#else</span>
<a name="l00682"></a>00682 <span class="preprocessor"></span>            (*this)[[*keys objectAtIndex:i]] = *values[i+1]; <span class="comment">/////</span>
<a name="l00683"></a>00683 <span class="comment"></span><span class="preprocessor">#endif</span>
<a name="l00684"></a>00684 <span class="preprocessor"></span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00685"></a>00685     }
<a name="l00686"></a>00686     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#9647d049646b7affb12458933d408d6d">operator = </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val );
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">00688</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( NSDictionary *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToDictionary:val]; }
<a name="l00689"></a><a class="code" href="class_o_o_dictionary.html#d8c3f7a23acf274f35efd90daa3a4adc">00689</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#d8c3f7a23acf274f35efd90daa3a4adc">operator != </a>( NSDictionary *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( val ); }
<a name="l00690"></a><a class="code" href="class_o_o_dictionary.html#95ba6af3d461f655821aaeb90c2f8795">00690</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( NSMutableDictionary *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToDictionary:val]; }
<a name="l00691"></a><a class="code" href="class_o_o_dictionary.html#c53510ae316f6b9bb7d09d8186c55566">00691</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#d8c3f7a23acf274f35efd90daa3a4adc">operator != </a>( NSMutableDictionary *val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( val ); }
<a name="l00692"></a><a class="code" href="class_o_o_dictionary.html#f389206c9f1ccd5e2809eced3796d735">00692</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToDictionary:val]; }
<a name="l00693"></a><a class="code" href="class_o_o_dictionary.html#48a11908b64667ddd714c37b089d1535">00693</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_dictionary.html#d8c3f7a23acf274f35efd90daa3a4adc">operator != </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="class_o_o_dictionary.html#82030e37dd88efd11fd5d995cc34a5b5">operator == </a>( val ); }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="comment">// dctionary operations</span>
<a name="l00696"></a><a class="code" href="class_o_o_dictionary.html#150629f1ee704288a9e4b192e0067609">00696</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#150629f1ee704288a9e4b192e0067609">operator -= </a>( <span class="keywordtype">id</span> val ) { 
<a name="l00697"></a>00697         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObjectForKey:val]; 
<a name="l00698"></a>00698         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00699"></a>00699     }
<a name="l00700"></a><a class="code" href="class_o_o_dictionary.html#92793575dd9124b3f92cad0d40a144c5">00700</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#150629f1ee704288a9e4b192e0067609">operator -= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) {
<a name="l00701"></a>00701         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObjectsForKeys:val]; 
<a name="l00702"></a>00702         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00703"></a>00703     }
<a name="l00704"></a><a class="code" href="class_o_o_dictionary.html#4774880cab7e4aab9ead3e35cf8b6d1c">00704</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#150629f1ee704288a9e4b192e0067609">operator -= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> &amp;val ) {
<a name="l00705"></a>00705         [<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() removeObjectsForKeys:[val allKeys]]; 
<a name="l00706"></a>00706         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708     
<a name="l00709"></a><a class="code" href="class_o_o_dictionary.html#287ddd315e02d5fc19a621ea1faf17d1">00709</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#287ddd315e02d5fc19a621ea1faf17d1">operator &amp;= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val ) {
<a name="l00710"></a>00710 <span class="preprocessor">#if 00000</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>        <span class="keywordflow">for</span> ( <span class="keywordtype">id</span> key in [<span class="keyword">get</span>() allKeys] )
<a name="l00712"></a>00712             <span class="keywordflow">if</span> ( !val[key] )
<a name="l00713"></a>00713                 *<span class="keyword">this</span> -= key;
<a name="l00714"></a>00714         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00715"></a>00715 <span class="preprocessor">#else</span>
<a name="l00716"></a>00716 <span class="preprocessor"></span>        <a class="code" href="class_o_o_array.html">OOArray&lt;id&gt;</a> keys = [<span class="keyword">get</span>() allKeys];
<a name="l00717"></a>00717         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;keys ; i++ )
<a name="l00718"></a>00718             <span class="keywordflow">if</span> ( !val[keys[i]] )
<a name="l00719"></a>00719                 *<span class="keyword">this</span> -= keys[i];
<a name="l00720"></a>00720         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00721"></a>00721 <span class="preprocessor">#endif</span>
<a name="l00722"></a>00722 <span class="preprocessor"></span>    }
<a name="l00723"></a><a class="code" href="class_o_o_dictionary.html#941404b4120c4ae797d2c79dba474df6">00723</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;<a class="code" href="class_o_o_dictionary.html#941404b4120c4ae797d2c79dba474df6">operator |= </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val ) {
<a name="l00724"></a>00724         <a class="code" href="class_o_o_array.html">OOArray&lt;id&gt;</a> keys = [val.get() allKeys];
<a name="l00725"></a>00725         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;keys ; i++ )
<a name="l00726"></a>00726             <span class="keywordflow">if</span> ( !(*<span class="keyword">this</span>)[keys[i]] )
<a name="l00727"></a>00727                 (*this)[keys[i]] = val[keys[i]];
<a name="l00728"></a>00728         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730         
<a name="l00731"></a><a class="code" href="class_o_o_dictionary.html#585ecacf0378fe01323a07c333b34101">00731</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> <a class="code" href="class_o_o_dictionary.html#38debfe458b3f9d5e8ebead5ace75da3">operator &amp; </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val )<span class="keyword"> const </span>{ 
<a name="l00732"></a>00732         <a class="code" href="class_o_o_dictionary.html">OODictionary</a> out; out &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); <span class="keywordflow">return</span> out &amp;= val;
<a name="l00733"></a>00733     }
<a name="l00734"></a><a class="code" href="class_o_o_dictionary.html#c86c0559bfeef2c0b10eab0987ccad33">00734</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> <a class="code" href="class_o_o_dictionary.html#c86c0559bfeef2c0b10eab0987ccad33">operator | </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary</a> &amp;val )<span class="keyword"> const </span>{
<a name="l00735"></a>00735         <a class="code" href="class_o_o_dictionary.html">OODictionary</a> out; out &lt;&lt;= <a class="code" href="class_o_o_reference.html#b0a07a11b99b035e16cc1d755fa48423">noalloc</a>(); <span class="keywordflow">return</span> out |= val;
<a name="l00736"></a>00736     }
<a name="l00737"></a>00737     
<a name="l00738"></a><a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">00738</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keywordtype">id</span> sub )<span class="keyword"> const </span>{
<a name="l00739"></a>00739         <span class="keywordflow">return</span> OODictionarySub&lt;ETYPE&gt;( <span class="keyword">this</span>, sub );
<a name="l00740"></a>00740     }
<a name="l00741"></a><a class="code" href="class_o_o_dictionary.html#9be0eb380b6ce4d989afa7f9bcc264c5">00741</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *sub )<span class="keyword"> const </span>{
<a name="l00742"></a>00742         <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[[NSString stringWithUTF8String:sub]];
<a name="l00743"></a>00743     }
<a name="l00744"></a><a class="code" href="class_o_o_dictionary.html#526e00420a4e650a0a36e29f9f597122">00744</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> CFStringRef sub )<span class="keyword"> const </span>{
<a name="l00745"></a>00745         <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[(id)sub];
<a name="l00746"></a>00746     }   
<a name="l00747"></a><a class="code" href="class_o_o_dictionary.html#4676b4c4dcb6fedd86a71875b086af69">00747</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_string.html">OOString</a> &amp;sub )<span class="keyword"> const </span>{
<a name="l00748"></a>00748         <span class="keywordflow">return</span> OODictionarySub&lt;ETYPE&gt;( <span class="keyword">this</span>, sub );
<a name="l00749"></a>00749     }
<a name="l00750"></a><a class="code" href="class_o_o_dictionary.html#f9a2d42c6f2aee5ef70ddcaa810ea7ec">00750</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> OOArraySub&lt;id&gt; &amp;sub )<span class="keyword"> const </span>{
<a name="l00751"></a>00751         <span class="keywordflow">return</span> OODictionarySub&lt;ETYPE&gt;( <span class="keyword">this</span>, sub );
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> OOArraySub&lt;OOString&gt; &amp;sub ) <span class="keyword">const</span>;
<a name="l00754"></a>00754     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> OODictionarySub&lt;OOString&gt; &amp;sub ) <span class="keyword">const</span>;
<a name="l00755"></a>00755     
<a name="l00756"></a><a class="code" href="class_o_o_dictionary.html#f5754a82e83bb426b7a62477028f4d3b">00756</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice&lt;ETYPE&gt; <a class="code" href="class_o_o_dictionary.html#5ba86bc1c1ab7950a1abf26aff0d08a9">operator [] </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;subs )<span class="keyword"> const </span>{
<a name="l00757"></a>00757         <span class="keywordflow">return</span> OODictionarySlice&lt;ETYPE&gt;( <span class="keyword">this</span>, subs.get() );
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759 };
<a name="l00760"></a>00760 <span class="comment"></span>
<a name="l00761"></a>00761 <span class="comment">/**</span>
<a name="l00762"></a>00762 <span class="comment"> Internal abstract superclass for subscripting operations by operator []</span>
<a name="l00763"></a>00763 <span class="comment"> */</span>
<a name="l00764"></a>00764 
<a name="l00765"></a>00765 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE,<span class="keyword">typename</span> RTYPE,<span class="keyword">typename</span> STYPE&gt;
<a name="l00766"></a><a class="code" href="class_o_o_subscript.html">00766</a> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a> {
<a name="l00767"></a>00767     <span class="keyword">friend</span> <span class="keyword">class </span>OONodeSub;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 <span class="keyword">protected</span>:
<a name="l00770"></a>00770     <span class="comment">// for x = int, NSString *, NSRange, OOArray&lt;id&gt;</span>
<a name="l00771"></a><a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">00771</a>     <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;RTYPE *&gt;</a> *<a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a>; <span class="comment">// for simple var[x]</span>
<a name="l00772"></a><a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">00772</a>     OOArraySub&lt;RTYPE *&gt; *<a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a>; <span class="comment">// for var...[0][x]</span>
<a name="l00773"></a><a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">00773</a>     OODictionarySub&lt;RTYPE *&gt; *<a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a>; <span class="comment">// for var...[@"KEY"][x]</span>
<a name="l00774"></a>00774 
<a name="l00775"></a><a class="code" href="class_o_o_subscript.html#4e3be10b73272bd121900284e0574828">00775</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html#4e3be10b73272bd121900284e0574828">OOSubscript</a>() {
<a name="l00776"></a>00776         <a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a> = NULL; <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> = NULL; <a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a> = NULL;
<a name="l00777"></a>00777         <a class="code" href="class_o_o_subscript.html#054fff0f1287795e805d4e39db853675">references</a> = 0;
<a name="l00778"></a>00778     }
<a name="l00779"></a><a class="code" href="class_o_o_subscript.html#434bda54aa4a9cf10a04496e27f0c969">00779</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html#434bda54aa4a9cf10a04496e27f0c969">~OOSubscript</a> () {
<a name="l00780"></a>00780         <span class="keywordflow">if</span> ( <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> &amp;&amp; --<a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a>-&gt;references == 0 )
<a name="l00781"></a>00781             <span class="keyword">delete</span> <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a>;
<a name="l00782"></a>00782         <span class="keywordflow">if</span> ( <a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a> &amp;&amp; --<a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a>-&gt;references == 0 )
<a name="l00783"></a>00783             <span class="keyword">delete</span> <a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a>;
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 
<a name="l00786"></a><a class="code" href="class_o_o_subscript.html#fff1eda927fd151a1aa221324f09b265">00786</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">id</span> <a class="code" href="class_o_o_subscript.html#fff1eda927fd151a1aa221324f09b265">autoget</a>()<span class="keyword"> const </span>{
<a name="l00787"></a>00787         <span class="keywordflow">return</span> [[<span class="keyword">get</span>() retain] autorelease];
<a name="l00788"></a>00788     }
<a name="l00789"></a>00789 
<a name="l00790"></a><a class="code" href="class_o_o_subscript.html#389987c4ab6a8fb80e1aaf1aa0301ca6">00790</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">get</span>( BOOL warn = YES ) <span class="keyword">const</span> { <span class="keywordflow">return</span> nil; }
<a name="l00791"></a><a class="code" href="class_o_o_subscript.html#ee93fbd96ddf51895f25c748f69e76e4">00791</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">set</span>( <span class="keywordtype">id</span> val ) <span class="keyword">const</span> { <span class="keywordflow">return</span> nil; }
<a name="l00792"></a>00792 
<a name="l00793"></a>00793 <span class="keyword">public</span>:
<a name="l00794"></a><a class="code" href="class_o_o_subscript.html#054fff0f1287795e805d4e39db853675">00794</a>     <span class="keywordtype">int</span> <a class="code" href="class_o_o_subscript.html#054fff0f1287795e805d4e39db853675">references</a>;
<a name="l00795"></a>00795     
<a name="l00796"></a><a class="code" href="class_o_o_subscript.html#1664c5662ce12f6681f12c23cbe725ec">00796</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">id</span> <a class="code" href="class_o_o_subscript.html#1664c5662ce12f6681f12c23cbe725ec">alloc</a>( Class c )<span class="keyword"> const </span>{
<a name="l00797"></a>00797         <span class="keywordtype">id</span> <a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a> = <span class="keyword">get</span>( NO );
<a name="l00798"></a>00798         <span class="keywordflow">if</span> ( !parent ) {
<a name="l00799"></a>00799             parent = [[c <a class="code" href="class_o_o_subscript.html#1664c5662ce12f6681f12c23cbe725ec">alloc</a>] init];
<a name="l00800"></a>00800             <a class="code" href="objcpp_8h.html#b753411cbf5b3a42b843576d9c285d28">OOTrace</a>( <span class="stringliteral">@"0x%08x %s %@"</span>, <span class="keyword">this</span>, <span class="stringliteral">"VIVIFY"</span>, parent );
<a name="l00801"></a>00801             [<span class="keyword">set</span>( parent ) release];
<a name="l00802"></a>00802         }
<a name="l00803"></a>00803 <span class="preprocessor">#if 001</span>
<a name="l00804"></a>00804 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ![parent isKindOfClass:c] ) {
<a name="l00805"></a>00805             <a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">OOWarn</a>( <span class="stringliteral">@"Reset: %@ == %@"</span>, [parent <span class="keyword">class</span>], c );
<a name="l00806"></a>00806             [<span class="keyword">set</span>( parent = [parent mutableCopy] ) release];
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808 <span class="preprocessor">#endif</span>
<a name="l00809"></a>00809 <span class="preprocessor"></span>        <span class="keywordflow">return</span> parent;
<a name="l00810"></a>00810     }
<a name="l00811"></a>00811     
<a name="l00812"></a><a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">00812</a>     RTYPE *<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( BOOL allocate )<span class="keyword"> const </span>{
<a name="l00813"></a>00813         <span class="keywordflow">if</span> ( allocate )
<a name="l00814"></a>00814             <span class="keywordflow">return</span> <a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a> ? ((<a class="code" href="class_o_o_reference.html">OOReference&lt;RTYPE *&gt;</a> *)<a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a>)-&gt;<a class="code" href="class_o_o_reference.html#2cb99db026710c3c3b3194269285de9a">alloc</a>() : <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> ? <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a>-&gt;alloc( [RTYPE <span class="keyword">class</span>] ) : <a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a>-&gt;alloc( [RTYPE <span class="keyword">class</span>] );
<a name="l00815"></a>00815         <span class="keywordflow">else</span>
<a name="l00816"></a>00816             <span class="keywordflow">return</span> root ? root-&gt;get() : <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> ? <a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a>-&gt;get( NO ) : <a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a>-&gt;get( NO );
<a name="l00817"></a>00817     }
<a name="l00818"></a>00818     
<a name="l00819"></a>00819     <span class="comment">// unaries  </span>
<a name="l00820"></a><a class="code" href="class_o_o_subscript.html#a78d1b32e1a79f92323b7826b91ec5c8">00820</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html#a78d1b32e1a79f92323b7826b91ec5c8">operator ETYPE </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }<span class="comment"></span>
<a name="l00821"></a>00821 <span class="comment">    ////oo_inline operator NSString * () const { return get(); }</span>
<a name="l00822"></a><a class="code" href="class_o_o_subscript.html#3c8ca57f0d8ae9ffe34aa6a5ba704d13">00822</a> <span class="comment"></span>    <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#3c8ca57f0d8ae9ffe34aa6a5ba704d13">operator * </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }
<a name="l00823"></a><a class="code" href="class_o_o_subscript.html#c7fd072878a85e6d5909fa62852f1f05">00823</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#c7fd072878a85e6d5909fa62852f1f05">operator -&gt; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(); }
<a name="l00824"></a><a class="code" href="class_o_o_subscript.html#9b4fb8f0bf9c21aed75f54538c392f55">00824</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">id</span> <a class="code" href="class_o_o_subscript.html#9b4fb8f0bf9c21aed75f54538c392f55">operator &amp; </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_o_o_subscript.html#fff1eda927fd151a1aa221324f09b265">autoget</a>(); }
<a name="l00825"></a><a class="code" href="class_o_o_subscript.html#a5da5c08497c4899989e9ddea0a0649d">00825</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#a5da5c08497c4899989e9ddea0a0649d">operator ! </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<span class="keyword">get</span>( NO ) || <span class="keyword">get</span>( NO ) == (id)kCFNull; }<span class="comment"></span>
<a name="l00826"></a>00826 <span class="comment">    ///oo_inline operator BOOL () const { return !!*this; }</span>
<a name="l00827"></a>00827 <span class="comment"></span>
<a name="l00828"></a>00828     <span class="comment">// recursive subscripting</span>
<a name="l00829"></a><a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba">00829</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keywordtype">int</span> sub )<span class="keyword"> const </span>{
<a name="l00830"></a>00830         <span class="keywordflow">return</span> OOArraySub&lt;STYPE&gt;( (OODictionarySub&lt;NSMutableArray *&gt; *)<span class="keyword">this</span>, sub );
<a name="l00831"></a>00831     }
<a name="l00832"></a><a class="code" href="class_o_o_subscript.html#c527472255c0f38c9831e72cb9274d87">00832</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keyword">const</span> NSRange &amp;sub )<span class="keyword"> const </span>{
<a name="l00833"></a>00833         <span class="keywordflow">return</span> OOArraySlice&lt;STYPE&gt;( (OODictionarySub&lt;NSMutableArray *&gt; *)<span class="keyword">this</span>, sub );
<a name="l00834"></a>00834     }
<a name="l00835"></a><a class="code" href="class_o_o_subscript.html#93ff9e62e2091959f48a93044ac2da62">00835</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keywordtype">id</span> sub )<span class="keyword"> const </span>{
<a name="l00836"></a>00836         <span class="keywordflow">return</span> OODictionarySub&lt;STYPE&gt;( (OODictionarySub&lt;NSMutableDictionary *&gt; *)<span class="keyword">this</span>, sub );
<a name="l00837"></a>00837     }
<a name="l00838"></a><a class="code" href="class_o_o_subscript.html#440e79e8cb7fee32ea63597058031431">00838</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *sub )<span class="keyword"> const </span>{
<a name="l00839"></a>00839         <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[[NSString stringWithUTF8String:sub]];
<a name="l00840"></a>00840     }   
<a name="l00841"></a><a class="code" href="class_o_o_subscript.html#98b677d1b7b5e1fb735aecf248102f16">00841</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keyword">const</span> CFStringRef sub )<span class="keyword"> const </span>{
<a name="l00842"></a>00842         <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[(id)sub];
<a name="l00843"></a>00843     }   
<a name="l00844"></a><a class="code" href="class_o_o_subscript.html#cae618589d7fff65f2e115a536a919e0">00844</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice&lt;STYPE&gt; <a class="code" href="class_o_o_subscript.html#662b1fc7c168abd86c8743b0b67e60ba" title="oo_inline operator BOOL () const { return !!*this; }">operator [] </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;sub )<span class="keyword"> const </span>{
<a name="l00845"></a>00845         <span class="keywordflow">return</span> OODictionarySlice&lt;STYPE&gt;( (OODictionarySub&lt;NSMutableDictionary *&gt; *)<span class="keyword">this</span>, sub );
<a name="l00846"></a>00846     }
<a name="l00847"></a>00847     
<a name="l00848"></a>00848     <span class="comment">// asignment</span>
<a name="l00849"></a><a class="code" href="class_o_o_subscript.html#31477777c5b5d78a0c32a63308ad65cb">00849</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;operator &lt;&lt;= ( id&lt;NSMutableCopying&gt; val ) {
<a name="l00850"></a>00850         [<span class="keyword">set</span>( [val mutableCopyWithZone:NULL] ) release]; 
<a name="l00851"></a>00851         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00852"></a>00852     }
<a name="l00853"></a><a class="code" href="class_o_o_subscript.html#e6f00c27d57cdef3d75b86d4e30a61d4">00853</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#31477777c5b5d78a0c32a63308ad65cb">operator &lt;&lt;= </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) {
<a name="l00854"></a>00854         <span class="keyword">set</span>( <a class="code" href="class_o_o_string.html">OOString</a>( val ) );
<a name="l00855"></a>00855         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00856"></a>00856     }
<a name="l00857"></a>00857 
<a name="l00858"></a><a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">00858</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( NSMutableString *val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00859"></a><a class="code" href="class_o_o_subscript.html#2705d274f0d27bd6afeec31cbd89d751">00859</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( NSString *val ) { *<span class="keyword">this</span> &lt;&lt;= val; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00860"></a><a class="code" href="class_o_o_subscript.html#b63ecffc1e9903f6dac566d4c223a6e0">00860</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( NSNumber *val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00861"></a><a class="code" href="class_o_o_subscript.html#aa97470aa20cf7500decd6e475f9ed5b">00861</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( NSNull *val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00862"></a>00862     
<a name="l00863"></a>00863     <span class="comment">// comparison</span>
<a name="l00864"></a><a class="code" href="class_o_o_subscript.html#7047eaab6d63695c64fe81f354ca2073">00864</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#7047eaab6d63695c64fe81f354ca2073">operator == </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> == val; }
<a name="l00865"></a><a class="code" href="class_o_o_subscript.html#8d1d10b750cdd2633dfab000fcf4a15b">00865</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#8d1d10b750cdd2633dfab000fcf4a15b">operator != </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> != val; }
<a name="l00866"></a><a class="code" href="class_o_o_subscript.html#e8a795e4e02e2d38a9e513e8aa841fdf">00866</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#e8a795e4e02e2d38a9e513e8aa841fdf">operator &gt;= </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> &gt;= val; }
<a name="l00867"></a><a class="code" href="class_o_o_subscript.html#e13e2ef2e8a60c12593abef2e73e0c70">00867</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#e13e2ef2e8a60c12593abef2e73e0c70">operator &lt;= </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> &lt;= val; }
<a name="l00868"></a><a class="code" href="class_o_o_subscript.html#83abafae40f6546fdfb4e39411facbc5">00868</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#83abafae40f6546fdfb4e39411facbc5">operator &gt;  </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> &gt;  val; }
<a name="l00869"></a><a class="code" href="class_o_o_subscript.html#5adc3ec4dd0dee1ce7b8097a22dc679e">00869</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL <a class="code" href="class_o_o_subscript.html#5adc3ec4dd0dee1ce7b8097a22dc679e">operator &lt;  </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> &lt;  val; }
<a name="l00870"></a>00870     
<a name="l00871"></a>00871     <span class="comment">// inplace operators</span>
<a name="l00872"></a><a class="code" href="class_o_o_subscript.html#b8b2bbec37f33ca63f10bdfe50c8ed62">00872</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#b8b2bbec37f33ca63f10bdfe50c8ed62">operator += </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> + val; }
<a name="l00873"></a><a class="code" href="class_o_o_subscript.html#cd3949ba4e84f2e6bf55be730936c898">00873</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#cd3949ba4e84f2e6bf55be730936c898">operator -= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> - val; }
<a name="l00874"></a><a class="code" href="class_o_o_subscript.html#f469f61b0656e11161251d6fea66584f">00874</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#f469f61b0656e11161251d6fea66584f">operator *= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> * val; }
<a name="l00875"></a><a class="code" href="class_o_o_subscript.html#63e9257b4e9db75ee62e22806a5980dc">00875</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#63e9257b4e9db75ee62e22806a5980dc">operator /= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> / val; }
<a name="l00876"></a><a class="code" href="class_o_o_subscript.html#6caaf4a51a2cb1a92735c67558e86a96">00876</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#6caaf4a51a2cb1a92735c67558e86a96">operator %= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> % val; }
<a name="l00877"></a><a class="code" href="class_o_o_subscript.html#ec966694259e9e49dd6f9708ea7e946c">00877</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#ec966694259e9e49dd6f9708ea7e946c">operator &amp;= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> &amp; val; }
<a name="l00878"></a><a class="code" href="class_o_o_subscript.html#ec39355b17bc56665ee6e8ef3bc80cfc">00878</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_subscript.html">OOSubscript</a> &amp;<a class="code" href="class_o_o_subscript.html#ec39355b17bc56665ee6e8ef3bc80cfc">operator |= </a>( <span class="keyword">const</span> ETYPE val ) { <span class="keywordflow">return</span> *<span class="keyword">this</span> = **<span class="keyword">this</span> | val; }
<a name="l00879"></a>00879     
<a name="l00880"></a>00880     <span class="comment">// binary operators</span>
<a name="l00881"></a><a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">00881</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00882"></a><a class="code" href="class_o_o_subscript.html#0ce44e0f7eec84d302e42b027618ba6c">00882</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#0ce44e0f7eec84d302e42b027618ba6c">operator - </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> - val; }
<a name="l00883"></a><a class="code" href="class_o_o_subscript.html#8cf18a9362bed8d94605e4afaa238b17">00883</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#3c8ca57f0d8ae9ffe34aa6a5ba704d13">operator * </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> * val; }
<a name="l00884"></a><a class="code" href="class_o_o_subscript.html#28abdd5248a410e31c846e0deef4f62e">00884</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#28abdd5248a410e31c846e0deef4f62e">operator / </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> / val; }
<a name="l00885"></a><a class="code" href="class_o_o_subscript.html#f889687e5dee00f15a9117314a12a63a">00885</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#f889687e5dee00f15a9117314a12a63a">operator % </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> % val; }
<a name="l00886"></a><a class="code" href="class_o_o_subscript.html#681ba03a48e5f39193974b1863899528">00886</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#9b4fb8f0bf9c21aed75f54538c392f55">operator &amp; </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> &amp; val; }
<a name="l00887"></a><a class="code" href="class_o_o_subscript.html#3869d154dbce8b59f124cd931f068803">00887</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#3869d154dbce8b59f124cd931f068803">operator | </a>( <span class="keyword">const</span> ETYPE val )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> **<span class="keyword">this</span> | val; }
<a name="l00888"></a>00888 
<a name="l00889"></a>00889     <span class="comment">// concatenate others</span>
<a name="l00890"></a><a class="code" href="class_o_o_subscript.html#e8263d3188f5335157c185998284982d">00890</a>     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( NSString *val ) { <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00891"></a>00891 <span class="preprocessor">#if 0000</span>
<a name="l00892"></a>00892 <span class="preprocessor"></span>    <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) { <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00893"></a>00893     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( <span class="keywordtype">double</span> val ) { <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00894"></a>00894     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( <span class="keywordtype">int</span> val ) { <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00895"></a>00895     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_subscript.html#6733bfea34995575f402d074d0e2cef9">operator + </a>( <span class="keywordtype">id</span> val ) { <span class="keywordflow">return</span> **<span class="keyword">this</span> + val; }
<a name="l00896"></a>00896 <span class="preprocessor">#endif</span>
<a name="l00897"></a>00897 <span class="preprocessor"></span>};
<a name="l00898"></a>00898 <span class="comment"></span>
<a name="l00899"></a>00899 <span class="comment">/**</span>
<a name="l00900"></a>00900 <span class="comment"> Internal class to represent a subscript operation in an expression so it can</span>
<a name="l00901"></a>00901 <span class="comment"> be assigned to. You can also use the ~val[i] operation to remove the value</span>
<a name="l00902"></a>00902 <span class="comment"> from the array and return it with either expression or autorelease scope.</span>
<a name="l00903"></a>00903 <span class="comment"> If the index assigned to is beyond the end of the array it will be padded</span>
<a name="l00904"></a>00904 <span class="comment"> with kCFNull values to allow for sparse arrays.</span>
<a name="l00905"></a>00905 <span class="comment"> </span>
<a name="l00906"></a>00906 <span class="comment"> Usage:</span>
<a name="l00907"></a>00907 <span class="comment">&lt;pre&gt;</span>
<a name="l00908"></a>00908 <span class="comment"> - (AVAudioPlayer *)play:OOArray&lt;AVAudioPlayer *&gt; &amp;amp;sounds {</span>
<a name="l00909"></a>00909 <span class="comment"> [*sounds[0] play]; // use * operator to get actual object ref</span>
<a name="l00910"></a>00910 <span class="comment"> return &amp;amp;~sounds[0]; // delete item at index 0 and return pointer</span>
<a name="l00911"></a>00911 <span class="comment"> }</span>
<a name="l00912"></a>00912 <span class="comment">&lt;/pre&gt;</span>
<a name="l00913"></a>00913 <span class="comment"> */</span>
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l00916"></a>00916 <span class="keyword">class </span>OOArraySub : <span class="keyword">public</span> <a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableArray,ETYPE&gt; {
<a name="l00917"></a>00917     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;;
<a name="l00918"></a>00918     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableArray,ETYPE&gt;;
<a name="l00919"></a>00919     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableDictionary,ETYPE&gt;;
<a name="l00920"></a>00920     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableArray,ETYPE&gt;;
<a name="l00921"></a>00921     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableDictionary,ETYPE&gt;;
<a name="l00922"></a>00922     <span class="keyword">friend</span> <span class="keyword">class </span>OONodeArraySub;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924     <span class="keywordtype">int</span> idx;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> *ref, <span class="keywordtype">int</span> sub ) {
<a name="l00927"></a>00927         this-&gt;root = ref;
<a name="l00928"></a>00928         idx = sub &lt; 0 ? [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) count]+sub : sub;
<a name="l00929"></a>00929     }
<a name="l00930"></a>00930     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub( OOArraySub&lt;NSMutableArray *&gt; *ref, <span class="keywordtype">int</span> sub ) {
<a name="l00931"></a>00931         this-&gt;aref = ref;
<a name="l00932"></a>00932         idx = sub &lt; 0 ? [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) count]+sub : sub;
<a name="l00933"></a>00933     }
<a name="l00934"></a>00934     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub( OODictionarySub&lt;NSMutableArray *&gt; *ref, <span class="keywordtype">int</span> sub ) {
<a name="l00935"></a>00935         this-&gt;dref = ref;
<a name="l00936"></a>00936         idx = sub &lt; 0 ? [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) count]+sub : sub;
<a name="l00937"></a>00937     }
<a name="l00938"></a>00938 
<a name="l00939"></a>00939 public:
<a name="l00940"></a>00940     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> virtual <span class="keywordtype">id</span> get( BOOL warn = YES )<span class="keyword"> const </span>{
<a name="l00941"></a>00941         NSMutableArray *arr = this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO );
<a name="l00942"></a>00942         <span class="keywordtype">id</span> ret = nil;
<a name="l00943"></a>00943         <span class="keywordflow">if</span> ( arr != (<span class="keywordtype">id</span>)kCFNull )
<a name="l00944"></a>00944             <span class="keywordflow">if</span> ( idx &lt; 0 )
<a name="l00945"></a>00945                 <a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">OOWarn</a>( <span class="stringliteral">@"0x%08x Excess negative index (%d) beyond size of array (%d)"</span>, <span class="keyword">this</span>, idx-[arr count], [arr count] );
<a name="l00946"></a>00946             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( idx &lt; [arr count] )
<a name="l00947"></a>00947                 ret = [arr objectAtIndex:idx];
<a name="l00948"></a>00948             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( warn )
<a name="l00949"></a>00949                 <a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">OOWarn</a>( <span class="stringliteral">@"0x%08x Array ref (%d) beyond end of array (%d)"</span>, <span class="keyword">this</span>, idx, [arr count] );
<a name="l00950"></a>00950         <span class="keywordflow">return</span> ret;
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">set</span> ( <span class="keywordtype">id</span> val ) <span class="keyword">const</span> {
<a name="l00953"></a>00953         NSMutableArray *arr = this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( YES );
<a name="l00954"></a>00954         NSUInteger count = [arr count];
<a name="l00955"></a>00955         <span class="keywordflow">if</span> ( val == nil )
<a name="l00956"></a>00956             val = <a class="code" href="objcpp_8h.html#c810750a94cd8de2a67df3c8a20add70">OONoValue</a>;
<a name="l00957"></a>00957         <span class="keywordflow">if</span> ( idx &lt; count )
<a name="l00958"></a>00958             [arr replaceObjectAtIndex:idx withObject:val];
<a name="l00959"></a>00959         <span class="keywordflow">else</span> {
<a name="l00960"></a>00960             <span class="keywordflow">while</span> ( count++ &lt; idx )
<a name="l00961"></a>00961                 [arr addObject:(id)kCFNull]; <span class="comment">// padding for sparse arrays</span>
<a name="l00962"></a>00962             [arr addObject:val];
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964         <span class="keywordflow">return</span> val;
<a name="l00965"></a>00965     }
<a name="l00966"></a>00966     
<a name="l00967"></a>00967     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> operator NSUInteger ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> idx; }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969     <span class="comment">// assign and assign by mutable copy </span>
<a name="l00970"></a>00970     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( ETYPE val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00971"></a>00971     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) { *<span class="keyword">this</span> = <a class="code" href="class_o_o_string.html">OOString</a>(val)<span class="comment">/*.get()*/</span>; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00972"></a>00972     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00973"></a>00973     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00974"></a>00974     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> OOArraySlice&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00975"></a>00975     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> OODictionarySlice&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00976"></a>00976     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00977"></a>00977     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySub &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     <span class="comment">// delete element and return it</span>
<a name="l00980"></a>00980     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE operator ~ () {
<a name="l00981"></a>00981         <span class="keywordtype">id</span> obj = <span class="keyword">get</span>();
<a name="l00982"></a>00982         <span class="keywordtype">int</span> rc = [obj retainCount];
<a name="l00983"></a>00983         ETYPE save = obj;
<a name="l00984"></a>00984         <span class="keywordflow">if</span> ( rc == [obj retainCount] )
<a name="l00985"></a>00985             this-&gt;<a class="code" href="class_o_o_subscript.html#fff1eda927fd151a1aa221324f09b265">autoget</a>();
<a name="l00986"></a>00986         NSMutableArray *arr = this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO );
<a name="l00987"></a>00987         <span class="keywordflow">if</span> ( 0 &lt;= idx &amp;&amp; idx &lt; [arr count] )
<a name="l00988"></a>00988             [arr removeObjectAtIndex:idx];
<a name="l00989"></a>00989         <span class="keywordflow">else</span>
<a name="l00990"></a>00990             <a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">OOWarn</a>( <span class="stringliteral">@"0x%08x Attempt to remove index (%d) beyond end of array (%d)"</span>, <span class="keyword">this</span>, idx, [arr count] );
<a name="l00991"></a>00991         <span class="keywordflow">return</span> save;
<a name="l00992"></a>00992     }
<a name="l00993"></a>00993 };
<a name="l00994"></a>00994 <span class="comment"></span>
<a name="l00995"></a>00995 <span class="comment">/**</span>
<a name="l00996"></a>00996 <span class="comment"> Internal class representing subscript by key in an expression so it </span>
<a name="l00997"></a>00997 <span class="comment"> can be assigned to. Subscripts can be applied recursively "viviifying"</span>
<a name="l00998"></a>00998 <span class="comment"> the required Dictionaries (or arrays) at each node as required. Array</span>
<a name="l00999"></a>00999 <span class="comment"> and Dictionary acces can be mixed recursively.</span>
<a name="l01000"></a>01000 <span class="comment"> </span>
<a name="l01001"></a>01001 <span class="comment"> Usage:</span>
<a name="l01002"></a>01002 <span class="comment"> &lt;pre&gt;</span>
<a name="l01003"></a>01003 <span class="comment"> OODictionary&lt;id&gt; dict;</span>
<a name="l01004"></a>01004 <span class="comment"> dict[@"DICT"]["KEY"] &lt;&lt;= @"TEXT1";</span>
<a name="l01005"></a>01005 <span class="comment"> dict[@"ARRAY"][0] = &lt;&lt;= @"TEXT2";</span>
<a name="l01006"></a>01006 <span class="comment"> &lt;/pre&gt;</span>
<a name="l01007"></a>01007 <span class="comment"> */</span>
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ETYPE&gt;
<a name="l01010"></a>01010 <span class="keyword">class </span>OODictionarySub : <span class="keyword">public</span> <a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableDictionary,ETYPE&gt; {
<a name="l01011"></a>01011     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_dictionary.html">OODictionary</a>&lt;ETYPE&gt;;
<a name="l01012"></a>01012     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableArray,ETYPE&gt;;
<a name="l01013"></a>01013     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableDictionary,ETYPE&gt;;
<a name="l01014"></a>01014     <span class="keyword">friend</span> <span class="keyword">class </span>OODefaultsSub;
<a name="l01015"></a>01015     <span class="keyword">friend</span> <span class="keyword">class </span>OONodeArraySub;
<a name="l01016"></a>01016     <span class="keyword">friend</span> <span class="keyword">class </span>OONodeSub;
<a name="l01017"></a>01017     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_node.html">OONode</a>;
<a name="l01018"></a>01018     
<a name="l01019"></a>01019     <span class="keywordtype">id</span> key;
<a name="l01020"></a>01020 
<a name="l01021"></a>01021     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> *ref, <span class="keywordtype">id</span> sub ) {
<a name="l01022"></a>01022         this-&gt;root = ref; this-&gt;key = sub;
<a name="l01023"></a>01023     }
<a name="l01024"></a>01024     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub( OOArraySub&lt;NSMutableDictionary *&gt; *ref, <span class="keywordtype">id</span> sub ) {
<a name="l01025"></a>01025         this-&gt;aref = ref; this-&gt;key = sub;
<a name="l01026"></a>01026     }
<a name="l01027"></a>01027     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub( OODictionarySub&lt;NSMutableDictionary *&gt; *ref, <span class="keywordtype">id</span> sub ) {
<a name="l01028"></a>01028         this-&gt;dref = ref; this-&gt;key = sub;
<a name="l01029"></a>01029     }
<a name="l01030"></a>01030 
<a name="l01031"></a>01031 <span class="keyword">public</span>:
<a name="l01032"></a>01032     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">get</span>( BOOL warn = YES ) <span class="keyword">const</span> {
<a name="l01033"></a>01033         <span class="keywordtype">id</span> parent = this-&gt;parent( NO );
<a name="l01034"></a>01034         <span class="keywordflow">return</span> parent != (id)kCFNull ? [parent objectForKey:this-&gt;key] : nil;
<a name="l01035"></a>01035     }
<a name="l01036"></a>01036     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">set</span>( <span class="keywordtype">id</span> val ) <span class="keyword">const</span> {
<a name="l01037"></a>01037         <span class="keywordflow">if</span> ( val == nil )
<a name="l01038"></a>01038             val = <a class="code" href="objcpp_8h.html#c810750a94cd8de2a67df3c8a20add70">OONoValue</a>;
<a name="l01039"></a>01039         [this-&gt;parent( YES ) setObject:val forKey:this-&gt;key];
<a name="l01040"></a>01040         return val;
<a name="l01041"></a>01041     }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     <span class="comment">// assign and assign by mutable copy </span>
<a name="l01044"></a>01044     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;operator = ( ETYPE val ) { <span class="keyword">set</span>( val ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01045"></a>01045     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *val ) { *<span class="keyword">this</span> = <a class="code" href="class_o_o_string.html">OOString</a>(val)<span class="comment">/*.get()*/</span>; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01046"></a>01046     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> OOArraySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01047"></a>01047     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> OODictionarySub&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01048"></a>01048     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> OOArraySlice&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01049"></a>01049     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> OODictionarySlice&lt;ETYPE&gt; &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01050"></a>01050     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableArray *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01051"></a>01051     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySub &amp;<a class="code" href="class_o_o_node.html#129338a344f7571d4960109b554d9bae">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_reference.html">OOReference&lt;NSMutableDictionary *&gt;</a> &amp;val ) { <span class="keyword">set</span>( val.get() ); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01052"></a>01052     
<a name="l01053"></a>01053     <span class="comment">// delete entry and return its value</span>
<a name="l01054"></a>01054     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> ETYPE <a class="code" href="class_o_o_reference.html#68b72441b23c571e7a55e02e248c3c6b">operator ~ </a>() {
<a name="l01055"></a>01055         <span class="keywordtype">id</span> obj = <span class="keyword">get</span>();
<a name="l01056"></a>01056         <span class="keywordtype">int</span> rc = [obj retainCount];
<a name="l01057"></a>01057         ETYPE save = obj;
<a name="l01058"></a>01058         <span class="keywordflow">if</span> ( rc == [obj retainCount] )
<a name="l01059"></a>01059             this-&gt;<a class="code" href="class_o_o_reference.html#cd795e2da75ff5a424fb60fc6ee2e32c">autoget</a>();
<a name="l01060"></a>01060         [this-&gt;parent( NO ) removeObjectForKey:this-&gt;key];
<a name="l01061"></a>01061         return save;
<a name="l01062"></a>01062     }
<a name="l01063"></a>01063 };
<a name="l01064"></a>01064 <span class="comment"></span>
<a name="l01065"></a>01065 <span class="comment">/**</span>
<a name="l01066"></a>01066 <span class="comment"> Class representing taking a sub array of objects from an array references a NSRange</span>
<a name="l01067"></a>01067 <span class="comment"> and the subscript to the operator []. OORange takes arguments start, end</span>
<a name="l01068"></a>01068 <span class="comment"> whereas NSMakeRange takes argument start, length/count. Either can be used.</span>
<a name="l01069"></a>01069 <span class="comment"> </span>
<a name="l01070"></a>01070 <span class="comment"> Usage:</span>
<a name="l01071"></a>01071 <span class="comment"> &lt;pre&gt;</span>
<a name="l01072"></a>01072 <span class="comment"> OOStringArray strings = "a b c d";</span>
<a name="l01073"></a>01073 <span class="comment"> if ( strings[NSMakeRange(1,2)] == "a b" )</span>
<a name="l01074"></a>01074 <span class="comment">    ;// should be true</span>
<a name="l01075"></a>01075 <span class="comment"> strings[OORange(1,3)] = OOStringArray( "x y" );</span>
<a name="l01076"></a>01076 <span class="comment"> if ( strings == "a x y d" )</span>
<a name="l01077"></a>01077 <span class="comment">    ; // should be true</span>
<a name="l01078"></a>01078 <span class="comment"> &lt;/pre&gt;</span>
<a name="l01079"></a>01079 <span class="comment"> */</span>
<a name="l01080"></a>01080 
<a name="l01081"></a>01081 template&lt;typename ETYPE&gt;
<a name="l01082"></a>01082 class OOArraySlice : public <a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableArray,ETYPE&gt; {
<a name="l01083"></a>01083     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;;
<a name="l01084"></a>01084     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableArray,ETYPE&gt;;
<a name="l01085"></a>01085     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableDictionary,ETYPE&gt;;
<a name="l01086"></a>01086     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableArray,ETYPE&gt;;
<a name="l01087"></a>01087     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableDictionary,ETYPE&gt;;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089     NSRange slice;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keywordtype">void</span> setSlice( <span class="keyword">const</span> NSRange &amp;sub ) {
<a name="l01092"></a>01092         <span class="keywordflow">if</span> ( (slice = sub).location &lt; 0 )
<a name="l01093"></a>01093             slice.location = [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) count]+slice.location;
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095     
<a name="l01096"></a>01096     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice( const <a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt; *ref, const NSRange &amp;sub ) {
<a name="l01097"></a>01097         this-&gt;<a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a> = ref; setSlice( sub );
<a name="l01098"></a>01098     }
<a name="l01099"></a>01099     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice( OOArraySub&lt;NSMutableArray *&gt; *ref, <span class="keyword">const</span> NSRange &amp;sub ) {
<a name="l01100"></a>01100         this-&gt;<a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> = ref; setSlice( sub );
<a name="l01101"></a>01101     }
<a name="l01102"></a>01102     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice( OODictionarySub&lt;NSMutableArray *&gt; *ref, <span class="keyword">const</span> NSRange &amp;sub ) {
<a name="l01103"></a>01103         this-&gt;<a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a> = ref; setSlice( sub );
<a name="l01104"></a>01104     }
<a name="l01105"></a>01105 <span class="keyword">public</span>:
<a name="l01106"></a>01106     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">get</span>( BOOL warn = YES ) <span class="keyword">const</span> {
<a name="l01107"></a>01107         <span class="keywordflow">return</span> [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) subarrayWithRange:slice];
<a name="l01108"></a>01108     }
<a name="l01109"></a>01109     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL operator == ( const <a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt; &amp;in )<span class="keyword"> const </span>{
<a name="l01110"></a>01110         <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToArray:in.get()];
<a name="l01111"></a>01111     }
<a name="l01112"></a>01112     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OOArraySlice &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> &amp;in ) {
<a name="l01113"></a>01113         NSMutableArray *<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a> = this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( YES );
<a name="l01114"></a>01114         [parent removeObjectsInRange:slice];
<a name="l01115"></a>01115         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;in ; i++ )
<a name="l01116"></a>01116             [parent insertObject:*in[i] atIndex:slice.location+i];
<a name="l01117"></a>01117         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01118"></a>01118     }
<a name="l01119"></a>01119     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> operator ~ () {
<a name="l01120"></a>01120         <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> save = <span class="keyword">get</span>();
<a name="l01121"></a>01121         [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) removeObjectsInRange:slice];
<a name="l01122"></a>01122         return save;
<a name="l01123"></a>01123     }
<a name="l01124"></a>01124 };
<a name="l01125"></a>01125 <span class="comment"></span>
<a name="l01126"></a>01126 <span class="comment">/**</span>
<a name="l01127"></a>01127 <span class="comment"> Class representing taking an array of objects from a dictionary references a</span>
<a name="l01128"></a>01128 <span class="comment"> "slice" of keys. Can be assigned to.</span>
<a name="l01129"></a>01129 <span class="comment"> </span>
<a name="l01130"></a>01130 <span class="comment"> Usage:</span>
<a name="l01131"></a>01131 <span class="comment"> &lt;pre&gt;</span>
<a name="l01132"></a>01132 <span class="comment"> OOStringDict dict = "a 1 b 2 c 3 d 4";</span>
<a name="l01133"></a>01133 <span class="comment"> if ( dict[OOSlice("b c")] == "2 3" )</span>
<a name="l01134"></a>01134 <span class="comment">   ;// should be true</span>
<a name="l01135"></a>01135 <span class="comment"> dict[OOSlice("b c")] = OOStringArray( "9 9" );</span>
<a name="l01136"></a>01136 <span class="comment"> if ( dict[OOSlice("b c")] = "9 9" )</span>
<a name="l01137"></a>01137 <span class="comment">   ; // should be true</span>
<a name="l01138"></a>01138 <span class="comment"> &lt;/pre&gt;</span>
<a name="l01139"></a>01139 <span class="comment"> */</span>
<a name="l01140"></a>01140 
<a name="l01141"></a>01141 template&lt;typename ETYPE&gt;
<a name="l01142"></a>01142 class OODictionarySlice : public <a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;<a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt;,NSMutableDictionary,ETYPE&gt; {
<a name="l01143"></a>01143     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_dictionary.html">OODictionary</a>&lt;ETYPE&gt;;
<a name="l01144"></a>01144     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableArray,ETYPE&gt;;
<a name="l01145"></a>01145     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_o_o_subscript.html">OOSubscript</a>&lt;ETYPE,NSMutableDictionary,ETYPE&gt;;
<a name="l01146"></a>01146 
<a name="l01147"></a>01147     <a class="code" href="class_o_o_array.html">OOArray&lt;id&gt;</a> slice;
<a name="l01148"></a>01148 
<a name="l01149"></a>01149     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice( <span class="keyword">const</span> <a class="code" href="class_o_o_dictionary.html">OODictionary&lt;ETYPE&gt;</a> *ref, NSMutableArray *sub ) {
<a name="l01150"></a>01150         this-&gt;<a class="code" href="class_o_o_subscript.html#8386db2f895e9931fca20005679e613a">root</a> = ref; slice = sub;
<a name="l01151"></a>01151     }
<a name="l01152"></a>01152     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice( OOArraySub&lt;NSMutableDictionary *&gt; *ref, NSMutableArray *sub ) {
<a name="l01153"></a>01153         this-&gt;<a class="code" href="class_o_o_subscript.html#aae4350f1bec6d18ed0fad11d821082c">aref</a> = ref; slice = sub;
<a name="l01154"></a>01154     }
<a name="l01155"></a>01155     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice( OODictionarySub&lt;NSMutableDictionary *&gt; *ref, NSMutableArray *sub ) {
<a name="l01156"></a>01156         this-&gt;<a class="code" href="class_o_o_subscript.html#ec11cb8ff62db1d894a5cf8b8000804e">dref</a> = ref; slice = sub;
<a name="l01157"></a>01157     }
<a name="l01158"></a>01158 <span class="keyword">public</span>:
<a name="l01159"></a>01159     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <span class="keyword">virtual</span> <span class="keywordtype">id</span> <span class="keyword">get</span>( BOOL warn = YES ) <span class="keyword">const</span> {
<a name="l01160"></a>01160         <span class="keywordflow">return</span> [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) objectsForKeys:slice notFoundMarker:(<span class="keywordtype">id</span>)kCFNull];
<a name="l01161"></a>01161     }
<a name="l01162"></a>01162     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> BOOL operator == ( const <a class="code" href="class_o_o_array.html">OOArray</a>&lt;ETYPE&gt; &amp;in )<span class="keyword"> const </span>{
<a name="l01163"></a>01163         <span class="keywordflow">return</span> [<span class="keyword">get</span>() isEqualToArray:in.get()];
<a name="l01164"></a>01164     }
<a name="l01165"></a>01165     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> OODictionarySlice &amp;<a class="code" href="class_o_o_subscript.html#3ef81dc1e18d0daac92c85e770b6b262">operator = </a>( <span class="keyword">const</span> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> &amp;in ) {
<a name="l01166"></a>01166         <span class="keywordflow">if</span> ( (<span class="keywordtype">int</span>)in != (<span class="keywordtype">int</span>)slice )
<a name="l01167"></a>01167             <a class="code" href="objcpp_8h.html#0647b5b82106e1568ba608021c7fc16e">OOWarn</a>( <span class="stringliteral">@"Slice assignment with key count [%d] different to value count [%d] - %@ c.f. %@"</span>, 
<a name="l01168"></a>01168                    (<span class="keywordtype">int</span>)slice, (<span class="keywordtype">int</span>)in, *slice, *in );
<a name="l01169"></a>01169         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0 ; i&lt;in &amp;&amp; i&lt;slice ; i++ )
<a name="l01170"></a>01170             [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( YES ) setObject:*in[i] forKey:slice[i]];
<a name="l01171"></a>01171         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l01172"></a>01172     }   
<a name="l01173"></a>01173     <a class="code" href="objcpp_8h.html#5e712be6142aa076e2c7f4fdadca5760">oo_inline</a> <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> operator ~ () {
<a name="l01174"></a>01174         <a class="code" href="class_o_o_array.html">OOArray&lt;ETYPE&gt;</a> save = <span class="keyword">get</span>();
<a name="l01175"></a>01175         [this-&gt;<a class="code" href="class_o_o_subscript.html#21e9055df90c25de46fd769a0e5d67ac">parent</a>( NO ) removeObjectsForKeys:slice];
<a name="l01176"></a>01176         return save;
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178 };
<a name="l01179"></a>01179 
<a name="l01180"></a>01180 <span class="preprocessor">#import "objstr.h"</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Nov 17 15:32:31 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
